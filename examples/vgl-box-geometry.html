<base href="../">
<style>
  .renderer {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
  }
  .buttons {
    position: fixed;
    z-index: 1;
    background: white;
    opacity: 0.9;
    top: 1rem;
    left: 1rem;
    list-style: none;
    margin: 0;
    padding: 1rem;
  }
  .buttons dd {
    margin: 0;
  }
</style>

<div id="app">
  <vgl-renderer antialias shadow-map-enabled class="renderer">
    <vgl-scene>
      <vgl-sphere-geometry name="sphere"></vgl-sphere-geometry>
      <vgl-box-geometry name="box"></vgl-box-geometry>
      <vgl-mesh-standard-material name="std" ></vgl-mesh-standard-material>
      <vgl-mesh geometry="box" material="std" position="0 -1.5 0" receive-shadow></vgl-mesh>
      <vgl-mesh geometry="sphere" material="std" cast-shadow receive-shadow></vgl-mesh>
      <vgl-ambient-light :color="color" :intensity="intensity"></vgl-ambient-light>
      <vgl-directional-light position="0 1 1" cast-shadow></vgl-directional-light>
    </vgl-scene>
    <vgl-perspective-camera orbit-position="5 1 1"></vgl-perspective-camera>
  </vgl-renderer>
  <dl class="buttons">
    <dt>Intensity:
    <dd><input type="range" v-model="intensity" max="1" step="0.01">
    <dt>Color:
    <dd><label>R<input v-model="red" type="range" max="255"></label>
    <dd><label>G<input v-model="green" type="range" max="255"></label>
    <dd><label>B<input v-model="blue" type="range" max="255"></label>
  </dl>
</div>

<script src="js/vue.min.js"></script>
<script src="js/three.min.js"></script>
<script src="js/vue-gl.js"></script>
<script>
  Object.keys(VueGL).forEach((key) => {
    Vue.component(key, VueGL[key]);
  });
  new Vue({
    el: '#app',
    data: {
      intensity: 0.5,
      red: 255,
      blue: 255,
      green: 255,
    },
    computed: {
      color() {
        return `#${this.to16(this.red)}${this.to16(this.green)}${this.to16(this.blue)}`;
      },
    },
    methods: {
      to16(num) {
        const res = parseInt(num, 10).toString(16);
        return res.length < 2 ? `0${res}` : res;
      },
    },
  });
</script>
