!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VueGL={},t.THREE)}(this,(function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,i){return(c=h()?Reflect.construct:function(t,e,i){var s=[null];s.push.apply(s,e);var n=new(Function.bind.apply(t,s));return i&&l(n,i.prototype),n}).apply(null,arguments)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],s=!0,n=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,a=t}finally{try{s||null==o.return||o.return()}finally{if(n)throw a}}return i}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var m=function(){function t(e){i(this,t),this.parent=e,this.children=[],this.hash=Object.create(null),this.listeners=Object.create(null),this.globalListeners=[],e&&e.children.push(this)}return n(t,[{key:"listen",value:function(t,e){"function"==typeof t?this.globalListeners.includes(t)||this.globalListeners.push(t):t in this.listeners?this.listeners[t].includes(e)||this.listeners[t].push(e):this.listeners[t]=[e]}},{key:"unlisten",value:function(t,e){if("function"==typeof t){var i=this.globalListeners.indexOf(t);i>=0&&this.globalListeners.splice(i,1)}else{var s=this.listeners[t];if(s)if(s.length>1){var n=s.indexOf(e);n>=0&&s.splice(n,1)}else s[0]===e&&delete this.listeners[t]}}},{key:"get",value:function(t){return t in this.hash?this.hash[t]:this.parent&&this.parent.get(t)}},{key:"set",value:function(t,e){this.hash[t]!==e&&(this.hash[t]=e,this.emit(t,e))}},{key:"keys",value:function(){var t=this,e=Object.keys(this.hash);if(!this.parent)return e;var i=this.parent.keys().filter((function(e){return!(e in t.hash)}));return[].concat(p(i),p(e))}},{key:"delete",value:function(t,e){this.hash[t]===e&&(delete this.hash[t],this.emit(t,this.parent&&this.parent.get(t)))}},{key:"emit",value:function(t,e){var i=this;t in this.listeners&&this.listeners[t].forEach((function(t){return t(e)})),this.children.forEach((function(i){t in i.hash||i.emit(t,e)})),this.globalListeners.forEach((function(t){return t(i)}))}},{key:"destroy",value:function(){if(this.parent){var t=this.parent.children;t.splice(t.indexOf(this),1)}}},{key:"fork",value:function(){return new t(this)}}]),t}(),g=Boolean,v=[String,Number],y=[String,Number],b=String,w=String,S=[String,Array],F=[String,e.Color,Number],j=[String,e.Vector2],N=[String,e.Vector3],x=[String,e.Euler],O=[String,e.Quaternion],A=[String,e.Spherical],L=[String,Array],V=[String,Array],M=[String,Array],k=[String,e.Fog],R={props:{tag:{type:b,default:"div"}},inject:{vglNamespace:{default:function(){return{cameras:new m,scenes:new m}}}},provide:function(){var t=this.vglNamespace,e=t.geometries,i=t.materials,s=t.textures,n=t.object3ds,a=t.curves;return{vglNamespace:Object.create(this.vglNamespace,{geometries:{value:e?e.fork():new m},materials:{value:i?i.fork():new m},textures:{value:s?s.fork():new m},object3ds:{value:n?n.fork():new m},curves:{value:a?a.fork():new m}})}},beforeDestroy:function(){var t=this.vglNamespace,e=t.geometries,i=t.materials,s=t.textures,n=t.object3ds,a=t.curves;e&&e.destroy(),i&&i.destroy(),s&&s.destroy(),n&&n.destroy(),a&&a.destroy()},render:function(t){return t(this.tag,this.$slots.default)}},C=function(){function t(e,s){i(this,t),this.listeners=e?e.listeners:[],this.inst=s||function(){}}return n(t,[{key:"listen",value:function(t){this.listeners.includes(t)||this.listeners.push(t)}},{key:"unlisten",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"emit",value:function(){this.listeners.forEach((function(t){return t()}))}}]),t}();function G(t){return Array.isArray(t)?t:t.trim().split(/\s+/)}function T(t){return t.isColor?t:new e.Color(t)}function P(t){if(t.isVector2)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Vector2,p(i.map(parseFloat)))}function B(t){if(t.isVector3)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Vector3,p(i.map(parseFloat)))}function D(t){if(t.isEuler)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Euler,p(i.slice(0,3).map(parseFloat)).concat([i[3]]))}function E(t){if(t.isQuaternion)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Quaternion,p(i.map(parseFloat)))}function I(t){if(t instanceof e.Spherical)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Spherical,p(i.map(parseFloat))).makeSafe()}function z(t){return Array.isArray(t)?t:t.split(",")}function U(t){var e=Array.isArray(t);return e&&t.every((function(t){return t.isVector2}))?t:(e?t:t.split(",")).map(P)}function $(t){return t.isFog?t:c(e.Fog,p(t.trim().split(/\s+/).map((function(t,e){return 0===e?t:parseFloat(t)}))))}function q(t){return!Number.isNaN(parseFloat(t))}function H(t){return!Number.isNaN(parseInt(t,10))}function W(t){return/^\s*\S+\s*$/.test(t)}function Q(t){return Array.isArray(t)?t.every(W):/\S+/.test(t)}function _(t){if(t instanceof e.Vector2)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 2===i.length&&i.every(q)}function K(t){if(t instanceof e.Vector3)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===i.length&&i.every(q)}function X(t){return(Array.isArray(t)?t:t.split(",")).every(q)}function Y(t){return(Array.isArray(t)?t:t.split(",")).every(_)}var Z={props:{position:{type:N,validator:K},rotation:{type:x,validator:function(t){if(t instanceof e.Euler)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===i.length&&i.slice(0,3).every(q)&&/[XYZ]{3}/.test(i[3])}},rotationQuaternion:{type:O,validator:function(t){if(t instanceof e.Quaternion)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===i.length&&i.every(q)}},scale:{type:N,validator:K},castShadow:g,receiveShadow:g,name:{type:w,validator:W},hidden:g},inject:{vglObject3d:{default:function(){return new C}},vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},provide:function(){var t=this;return{vglObject3d:new C(this.vglObject3d,(function(){return t.inst}))}},computed:{inst:function(){return new e.Object3D},parent:function(){return this.vglObject3d.inst()}},methods:{emitAsObject3d:function(){this.vglNamespace.object3ds.emit(this.name,this.inst)}},beforeDestroy:function(){this.inst.parent&&this.inst.parent.remove(this.inst),void 0!==this.name&&(this.vglObject3d.unlisten(this.emitAsObject3d),this.vglNamespace.object3ds.delete(this.name,this.inst))},watch:{inst:{handler:function(t,e){e&&e.parent&&e.parent.remove(e),this.parent&&this.parent.add(t),this.position&&t.position.copy(B(this.position)),this.rotation&&t.rotation.copy(D(this.rotation)),this.rotationQuaternion&&t.quaternion.copy(E(this.rotationQuaternion)),this.scale&&t.scale.copy(B(this.scale)),Object.assign(t,{castShadow:this.castShadow,receiveShadow:this.receiveShadow,visible:!this.hidden,name:this.name}),void 0!==this.name&&this.vglNamespace.object3ds.set(this.name,t),e&&this.vglObject3d.emit()},immediate:!0},parent:function(t){t.add(this.inst)},name:[function(t){this.inst.name=t},{handler:function(t,e){void 0!==e&&(this.vglNamespace.object3ds.delete(e,this.inst),void 0===t&&this.vglObject3d.unlisten(this.emitAsObject3d)),void 0!==t&&(this.vglNamespace.object3ds.set(t,this.inst),void 0===e&&this.vglObject3d.listen(this.emitAsObject3d))},immediate:!0}],position:function(t){this.inst.position.copy(B(t)),this.vglObject3d.emit()},rotation:function(t){this.inst.rotation.copy(D(t)),this.vglObject3d.emit()},rotationQuaternion:function(t){this.inst.quaternion.copy(E(t)),this.vglObject3d.emit()},scale:function(t){this.inst.scale.copy(B(t)),this.vglObject3d.emit()},castShadow:function(t){this.inst.castShadow=t,this.vglObject3d.emit()},receiveShadow:function(t){this.inst.receiveShadow=t,this.vglObject3d.emit()},hidden:function(t){this.inst.visible=!t,this.vglObject3d.emit()}},render:function(t){return this.$slots.default?t("template",this.$slots.default):void 0}},J={mixins:[Z],props:{fog:k,backgroundColor:b,backgroundTexture:{type:w,validator:W},name:{type:w,required:!0,validator:W}},computed:{inst:function(){return new e.Scene}},methods:{setBackgroundTexture:function(t){this.inst.background=t||null,this.vglObject3d.emit()},emitAsScene:function(){this.vglNamespace.scenes.emit(this.name,this.inst)}},created:function(){this.vglObject3d.listen(this.emitAsScene)},beforeDestroy:function(){void 0!==this.backgroundTexture&&this.vglNamespace.textures.unlisten(this.backgroundTexture,this.setBackgroundTexture),this.vglNamespace.scenes.delete(this.name,this.inst),this.vglObject3d.unlisten(this.emitAsScene)},watch:{inst:{handler:function(t){void 0!==this.fog&&(this.inst.fog=$(this.fog)),void 0!==this.backgroundColor&&(this.inst.background=T(this.backgroundColor)),void 0!==this.backgroundTexture&&this.setBackgroundTexture(this.vglNamespace.textures.get(this.backgroundTexture)),this.vglNamespace.scenes.set(this.name,t)},immediate:!0},name:function(t,e){this.vglNamespace.scenes.delete(e,this.inst),this.vglNamespace.scenes.set(t,this.inst)},fog:function(t){this.inst.fog=$(t),this.vglObject3d.emit()},backgroundColor:function(t){this.inst.background=T(t),this.vglObject3d.emit()},backgroundTexture:{handler:function(t,e){void 0!==e&&this.vglNamespace.textures.unlisten(e,this.setBackgroundTexture),void 0!==t&&(this.vglNamespace.textures.listen(t,this.setBackgroundTexture),this.setBackgroundTexture(this.vglNamespace.textures.get(t)))},immediate:!0}}},tt={mixins:[Z],props:{orbitTarget:{type:N,validator:K},orbitPosition:{type:A,validator:function(t){if(t instanceof e.Spherical)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===i.length&&i.every(q)}},name:{type:w,required:!0,validator:W}},computed:{inst:function(){return new e.Camera}},methods:{emitAsCamera:function(){this.vglNamespace.cameras.emit(this.name,this.inst)}},created:function(){this.vglObject3d.listen(this.emitAsCamera)},beforeDestroy:function(){this.vglObject3d.unlisten(this.emitAsCamera),this.vglNamespace.cameras.delete(this.name,this.inst)},watch:{inst:{handler:function(t){var i;(this.orbitPosition||this.orbitTarget)&&(this.orbitTarget&&(i=B(this.orbitTarget)),this.orbitPosition&&(t.position.setFromSpherical(I(this.orbitPosition)),i&&t.position.add(i)),t.lookAt(i||new e.Vector3));this.vglNamespace.cameras.set(this.name,t)},immediate:!0},name:function(t,e){this.vglNamespace.cameras.delete(e,this.inst),this.vglNamespace.cameras.set(t,this.inst)},orbitTarget:function(t){var e=B(t);this.orbitPosition&&this.inst.position.setFromSpherical(I(this.orbitPosition)).add(e),this.inst.lookAt(e),this.vglObject3d.emit()},orbitPosition:function(t){if(this.inst.position.setFromSpherical(I(t)),this.orbitTarget){var i=B(this.orbitTarget);this.inst.position.add(i),this.inst.lookAt(i)}else this.inst.lookAt(new e.Vector3);this.vglObject3d.emit()}}};function et(t,e,i){if(t.isPerspectiveCamera)Object.assign(t,{aspect:e/i});else{if(!t.isOrthographicCamera)throw new TypeError("Unknown camera type.");Object.assign(t,{left:-e/2,right:e/2,top:i/2,bottom:-i/2})}t.updateProjectionMatrix()}var it={mixins:[R],props:{camera:{type:w,required:!0,validator:W},scene:{type:w,required:!0,validator:W},alpha:g,disablePremultipliedAlpha:g,antialias:g,disableStencil:g,preserveDrawingBuffer:g,disableDepth:g,logarithmicDepthBuffer:g,shadowMapEnabled:g,precision:{type:b,validator:function(t){return/^(highp|mediump|lowp)$/.test(t)}},powerPreference:{type:b,validator:function(t){return/^(high-performance|low-power|default)$/.test(t)}}},computed:{inst:function(){var t=new e.WebGLRenderer({precision:this.precision,alpha:this.alpha,premultipliedAlpha:!this.disablePremultipliedAlpha,antialias:this.antialias,stencil:!this.disableStencil,preserveDrawingBuffer:this.preserveDrawingBuffer,depth:!this.disableDepth,logarithmicDepthBuffer:this.logarithmicDepthBuffer,powerPreference:this.powerPreference});return t.shadowMap.enabled=this.shadowMapEnabled,t}},methods:{setCameraRef:function(t){this.cameraRef=t,this.$el&&(t&&et(t,this.$el.clientWidth,this.$el.clientHeight),this.requestRender(t&&this.sceneRef))},setSceneRef:function(t){this.sceneRef=t,this.$el&&this.requestRender(t&&this.cameraRef)},setFallbackCamera:function(t){var e=t.keys();this.setCameraRef(1===e.length?t.get(e[0]):void 0)},setFallbackScene:function(t){var e=t.keys();this.setSceneRef(1===e.length?t.get(e[0]):void 0)},requestRender:function(){var t=this;this.reservation||this.$nextTick((function(){if(t.reservation>0)t.inst.render(t.sceneRef,t.cameraRef);else{if(!t.cameraRef&&t.vglNamespace.cameras.keys().length){if(void 0===t.camera){var e=t.vglNamespace.cameras.keys().length;throw new ReferenceError("Cannot identify the camera. Multiple(".concat(e,") cameras are defined but camera prop is not given."))}throw new ReferenceError("Cannot identify the camera. The camera named ".concat(t.camera," is not defined."))}if(!t.sceneRef&&t.vglNamespace.scenes.keys().length){if(void 0===t.scene){var i=t.vglNamespace.cameras.keys().length;throw new ReferenceError("Cannot identify the scene. Multiple(".concat(i,") scenes are defined but scene prop is not given."))}throw new ReferenceError("Cannot identify the scene. The scene named ".concat(t.scene," is not defined."))}}t.reservation=0})),this.reservation=!arguments.length||(arguments.length<=0?void 0:arguments[0])?1:-1}},mounted:function(){this.inst.setSize(this.$el.clientWidth,this.$el.clientHeight),this.$el.appendChild(this.inst.domElement),this.cameraRef&&et(this.cameraRef,this.$el.clientWidth,this.$el.clientHeight),this.requestRender(this.cameraRef&&this.sceneRef)},beforeDestroy:function(){void 0===this.camera?this.vglNamespace.cameras.unlisten(this.setFallbackCamera):this.vglNamespace.cameras.unlisten(this.camera,this.setCameraRef),void 0===this.scene?this.vglNamespace.scenes.unlisten(this.setFallbackScene):this.vglNamespace.scenes.unlisten(this.scene,this.setSceneRef),this.inst.dispose()},watch:{inst:function(t,e){this.$el&&(t.setSize(this.$el.clientWidth,this.$el.clientHeight),this.$el.replaceChild(t.domElement,e.domElement),this.cameraRef&&this.sceneRef&&this.requestRender()),e.dispose()},camera:{handler:function(t,e){void 0===e?this.vglNamespace.cameras.unlisten(this.setFallbackCamera):this.vglNamespace.cameras.unlisten(e,this.setCameraRef),void 0===t?(this.vglNamespace.cameras.listen(this.setFallbackCamera),this.setFallbackCamera(this.vglNamespace.cameras)):(this.vglNamespace.cameras.listen(t,this.setCameraRef),this.setCameraRef(this.vglNamespace.cameras.get(t)))},immediate:!0},scene:{handler:function(t,e){void 0===e?this.vglNamespace.scenes.unlisten(this.setFallbackScene):this.vglNamespace.scenes.unlisten(e,this.setSceneRef),void 0===t?(this.vglNamespace.scenes.listen(this.setFallbackScene),this.setFallbackScene(this.vglNamespace.scenes)):(this.vglNamespace.scenes.listen(t,this.setSceneRef),this.setSceneRef(this.vglNamespace.scenes.get(t)))},immediate:!0}},render:function(t){var e=this;return t("div",[t("iframe",{style:{visibility:"hidden",width:"100%",height:"100%",marginRight:"-100%",border:"none"},on:{load:function(t){t.target.contentWindow.addEventListener("resize",(function(){e.inst.setSize(e.$el.clientWidth,e.$el.clientHeight),e.cameraRef&&(et(e.cameraRef,e.$el.clientWidth,e.$el.clientHeight),e.sceneRef&&e.requestRender())}),!1)}}},this.$slots.default)])}},st={mixins:[tt],props:{zoom:{type:y,default:1},near:{type:y,default:.1},far:{type:y,default:2e3},fov:{type:y,default:50}},computed:{inst:function(){return new e.PerspectiveCamera}},watch:{inst:{handler:function(t){Object.assign(t,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far),fov:parseFloat(this.fov)})},immediate:!0},zoom:function(t){this.inst.zoom=parseFloat(t),this.vglObject3d.emit()},near:function(t){this.inst.near=parseFloat(t),this.vglObject3d.emit()},far:function(t){this.inst.far=parseFloat(t),this.vglObject3d.emit()},fov:function(t){this.inst.fov=parseFloat(t),this.vglObject3d.emit()}}},nt={mixins:[Z],computed:{inst:function(){return new e.Group}}},at={mixins:[Z],props:{color:{type:F,default:"#fff"},intensity:{type:y,default:1}},computed:{inst:function(){return new e.Light}},watch:{inst:{handler:function(t){t.color.setStyle(this.color),Object.assign(t,{intensity:parseFloat(this.intensity)})},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.vglObject3d.emit()},intensity:function(t){this.inst.intensity=parseFloat(t),this.vglObject3d.emit()}}},rt={mixins:[at],computed:{inst:function(){return new e.DirectionalLight}}},ot={mixins:[at],computed:{inst:function(){return new e.AmbientLight}}},lt={front:e.FrontSide,back:e.BackSide,double:e.DoubleSide},ht={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:w,required:!0,validator:W},side:{type:b,default:"front"},vertexColors:{type:g}},computed:{inst:function(){return new e.Material}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.materials.emit(this.name,this.inst)}},watch:{inst:{handler:function(t){t.setValues({side:lt[this.side],vertexColors:this.vertexColors}),this.vglNamespace.materials.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.materials.delete(e,this.inst),void 0!==t&&this.vglNamespace.materials.set(t,this.inst)},side:function(t){this.inst.side=lt[t],this.update()},vertexColors:function(t){this.inst.vertexColors=t,this.update()}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.materials.delete(this.name,this.inst)},render:function(t){return this.$slots.default?t("template",this.$slots.default):void 0}},ct={mixins:[ht],props:{color:{type:F,default:"#fff"},size:{type:y,default:1},disableSizeAttenuation:g},computed:{inst:function(){return new e.PointsMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{size:parseFloat(this.size),sizeAttenuation:!this.disableSizeAttenuation}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},size:function(t){this.inst.size=parseFloat(t),this.update()},disableSizeAttenuation:function(t){this.inst.sizeAttenuation=!t,this.update()}}},ut={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:w,required:!0,validator:W},positionAttribute:{type:L,validator:X},colorAttribute:{type:L,validator:X},normalAttribute:{type:L,validator:X}},computed:{inst:function(){return new e.BufferGeometry}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.geometries.emit(this.name,this.inst)}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.geometries.delete(this.name,this.inst),this.inst.dispose()},watch:{inst:{handler:function(t,i){if(this.positionAttribute){var s=i?i.getAttribute("position"):new e.BufferAttribute(new Float32Array(z(this.positionAttribute)),3);t.setAttribute("position",s)}if(this.colorAttribute){var n=i?i.getAttribute("color"):new e.BufferAttribute(new Float32Array(z(this.colorAttribute)),3);t.setAttribute("color",n)}if(this.normalAttribute){var a=i?i.getAttribute("normal"):new e.BufferAttribute(new Float32Array(z(this.normalAttribute)),3);t.setAttribute("normal",a)}i&&i.dispose(),this.vglNamespace.geometries.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.geometries.delete(e,this.inst),void 0!==t&&this.vglNamespace.geometries.set(t,this.inst)},positionAttribute:function(t){var i=z(t),s=this.inst.getAttribute("position");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("position",s)}s.needsUpdate=!0,this.update()},colorAttribute:function(t){var i=z(t),s=this.inst.getAttribute("color");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("color",s)}s.needsUpdate=!0,this.update()},normalAttribute:function(t){var i=z(t),s=this.inst.getAttribute("normal");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("normal",s)}s.needsUpdate=!0,this.update()}},render:function(t){return this.$slots.default?t("template",this.$slots.default):void 0}},pt={mixins:[ut],props:{radius:{type:y,default:1},widthSegments:{type:v,default:8},heightSegments:{type:v,default:6},phiStart:{type:y,default:0},phiLength:{type:y,default:2*Math.PI},thetaStart:{type:y,default:0},thetaLength:{type:y,default:Math.PI}},computed:{inst:function(){return new e.SphereBufferGeometry(parseFloat(this.radius),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseFloat(this.phiStart),parseFloat(this.phiLength),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},dt={mixins:[Z],methods:{setMaterial:function(){var t=this.vglNamespace.materials,e=this.inst,i=G(this.material).reduce((function(e,i){return t.get(i)?[].concat(p(e),[t.get(i)]):e}),[]);e.material=1===i.length?i[0]:i,this.vglObject3d.emit()}},watch:{inst:function(){void 0!==this.material&&this.setMaterial()},material:{handler:function(t,e){var i=this.vglNamespace.materials,s=this.setMaterial;void 0!==e&&G(e).forEach((function(t){return i.unlisten(t,s)})),void 0!==t&&(G(t).forEach((function(t){return i.listen(t,s)})),s())},immediate:!0}},beforeDestroy:function(){var t=this.vglNamespace.materials,e=this.material,i=this.setMaterial;void 0!==e&&G(e).forEach((function(e){return t.unlisten(e,i)}))}},ft={mixins:[dt],methods:{setGeometry:function(t){t&&(this.inst.geometry=t,this.vglObject3d.emit(),void 0!==this.name&&this.vglNamespace.object3ds.emit(this.name,this.inst))}},watch:{inst:function(){void 0!==this.geometry&&this.setGeometry(this.vglNamespace.geometries.get(this.geometry))},geometry:{handler:function(t,e){var i=this.vglNamespace.geometries,s=this.setGeometry;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(i.get(t)))},immediate:!0}},beforeDestroy:function(){this.vglNamespace.geometries.unlisten(this.geometry,this.setGeometry)}},mt={mixins:[ht],methods:{setMap:function(){var t=this.vglNamespace.textures,e=this.inst,i=this.map;t.keys().includes(i)&&(e.map=t.get(i)),this.vglNamespace.materials.emit(this.name,e)}},watch:{inst:function(){void 0!==this.map&&this.setMap(this.vglNamespace.textures.get(this.map))},map:{handler:function(t,e){var i=this.vglNamespace.textures,s=this.setMap;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(i.get(t)))},immediate:!0}},beforeDestroy:function(){this.vglNamespace.textures.unlisten(this.map,this.setMap)}},gt={mixins:[ut],data:function(){return{shapeNames:[]}},computed:{shapeObjects:function(){var t=this;return this.shapeNames.map((function(e){var i=u(e,1)[0];return t.vglNamespace.curves.get(i)}))}},methods:{setShapeNames:function(){var t=this,e=G(this.shapes);this.shapeNames=e.map((function(e){return[e,t.vglNamespace.curves.get(e).uuid]})),this.update()}},beforeDestroy:function(){var t=this;void 0!==this.shapes&&G(this.shapes).forEach((function(e){t.vglNamespace.curves.unlisten(e,t.setShapeUuids)}))},watch:{shapes:{handler:function(t,e){var i=this,s=void 0===e?[]:G(e),n=void 0===t?[]:G(t);s.forEach((function(t){n.includes(t)||i.vglNamespace.curves.unlisten(t,i.setShapeNames)})),n.forEach((function(t){s.includes(t)||i.vglNamespace.curves.listen(t,i.setShapeNames)})),void 0!==t&&this.setShapeNames()},immediate:!0}}},vt={mixins:[mt],props:{color:{type:F,default:"#fff"},map:{type:w,validator:W}},computed:{inst:function(){return new e.MeshStandardMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},yt={mixins:[ft],props:{geometry:{type:w,validator:W},material:{type:S,validator:Q}},computed:{inst:function(){return new e.Mesh}}},bt={mixins:[ft],props:{geometry:{type:w,validator:W},material:{type:w,validator:W}},computed:{inst:function(){return new e.Points}}},wt={mixins:[ht],props:{color:{type:F,default:"#fff"},linewidth:{type:y,default:1},linecap:{type:b,default:"round",validator:function(t){return/^(butt|round|square)$/.test(t)}},linejoin:{type:b,default:"round",validator:function(t){return/^(round|bevel|miter)$/.test(t)}}},computed:{inst:function(){return new e.LineBasicMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{linecap:this.linecap,linejoin:this.linejoin,linewidth:parseFloat(this.linewidth)}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},linecap:function(t){this.inst.linecap=t,this.update()},linejoin:function(t){this.inst.linejoin=t,this.update()}}},St={mixins:[ft],props:{geometry:{type:w,validator:W},material:{type:w,validator:W}},computed:{inst:function(){return new e.Line}},methods:{computeLineDistances:function(){this.inst.material.isLineDashedMaterial&&this.inst.computeLineDistances()}},beforeDestroy:function(){void 0!==this.geometry&&this.vglNamespace.geometries.unlisten(this.geometry,this.computeLineDistances),void 0!==this.material&&this.vglNamespace.materials.unlisten(this.material,this.computeLineDistances)},watch:{geometry:{handler:function(t,e){void 0!==e&&this.vglNamespace.geometries.unlisten(e,this.computeLineDistances),void 0!==t&&(this.vglNamespace.geometries.listen(t,this.computeLineDistances),this.computeLineDistances())},immediate:!0},material:{handler:function(t,e){void 0!==e&&this.vglNamespace.materials.unlisten(e,this.computeLineDistances),void 0!==t&&(this.vglNamespace.materials.listen(t,this.computeLineDistances),this.computeLineDistances())},immediate:!0}}},Ft={mixins:[dt],props:{material:{type:w,validator:W}},computed:{inst:function(){return new e.Sprite}}},jt={mixins:[ut],props:{width:{type:y,default:1},height:{type:y,default:1},depth:{type:y,default:1},widthSegments:{type:v,default:1},heightSegments:{type:v,default:1},depthSegments:{type:v,default:1}},computed:{inst:function(){return new e.BoxBufferGeometry(parseFloat(this.width),parseFloat(this.height),parseFloat(this.depth),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseInt(this.depthSegments,10))}}},Nt={mixins:[ut],props:{radius:{type:y,default:1},segments:{type:v,default:8},thetaStart:{type:y,default:0},thetaLength:{type:y,default:2*Math.PI}},computed:{inst:function(){return new e.CircleBufferGeometry(parseFloat(this.radius),parseInt(this.segments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},xt={mixins:[St],computed:{inst:function(){return new e.LineSegments}}},Ot={mixins:[St],computed:{inst:function(){return new e.LineLoop}}},At={mixins:[ut],props:{radiusTop:{type:y,default:1},radiusBottom:{type:y,default:1},height:{type:y,default:1},radialSegments:{type:v,default:8},heightSegments:{type:v,default:1},openEnded:g,thetaStart:{type:y,default:0},thetaLength:{type:y,default:2*Math.PI}},computed:{inst:function(){return new e.CylinderBufferGeometry(parseFloat(this.radiusTop),parseFloat(this.radiusBottom),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Lt={mixins:[At],props:{radius:{type:y,default:1}},computed:{inst:function(){return new e.ConeBufferGeometry(parseFloat(this.radius),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Vt={mixins:[Z],props:{size:{type:y,default:1}},computed:{inst:function(){return new e.AxesHelper(parseFloat(this.size))}}},Mt={mixins:[tt],props:{zoom:{type:y,default:1},near:{type:y,default:.1},far:{type:y,default:2e3}},computed:{inst:function(){return new e.OrthographicCamera}},watch:{inst:{handler:function(t){Object.assign(t,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far)})},immediate:!0},zoom:function(t){this.inst.zoom=parseFloat(t),this.vglObject3d.emit()},near:function(t){this.inst.near=parseFloat(t),this.vglObject3d.emit()},far:function(t){this.inst.far=parseFloat(t),this.vglObject3d.emit()}}},kt={mixins:[ut],props:{width:{type:y,default:1},height:{type:y,default:1},widthSegments:{type:v,default:1},heightSegments:{type:v,default:1}},computed:{inst:function(){return new e.PlaneBufferGeometry(parseFloat(this.width),parseFloat(this.height),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10))}}},Rt={mixins:[ut],props:{radius:{type:y,default:1},detail:{type:v,default:0}},computed:{inst:function(){return new e.DodecahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Ct={mixins:[ut],props:{radius:{type:y,default:1},detail:{type:v,default:0}},computed:{inst:function(){return new e.IcosahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Gt={mixins:[ut],props:{radius:{type:y,default:1},detail:{type:v,default:0}},computed:{inst:function(){return new e.OctahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Tt={mixins:[ut],props:{innerRadius:{type:y,default:.5},outerRadius:{type:y,default:1},thetaSegments:{type:v,default:8},phiSegments:{type:v,default:1},thetaStart:{type:y,default:0},thetaLength:{type:y,default:2*Math.PI}},computed:{inst:function(){return new e.RingBufferGeometry(parseFloat(this.innerRadius),parseFloat(this.outerRadius),parseInt(this.thetaSegments,10),parseInt(this.phiSegments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Pt={mixins:[ut],props:{radius:{type:y,default:1},detail:{type:v,default:0}},computed:{inst:function(){return new e.TetrahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Bt={mixins:[ut],props:{radius:{type:y,default:1},tube:{type:y,default:.4},radialSegments:{type:v,default:8},tubularSegments:{type:v,default:6},arc:{type:y,default:2*Math.PI}},computed:{inst:function(){return new e.TorusBufferGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.radialSegments,10),parseInt(this.tubularSegments,10),parseFloat(this.arc))}}},Dt={mixins:[ut],props:{radius:{type:y,default:1},tube:{type:y,default:.4},radialSegments:{type:v,default:8},tubularSegments:{type:v,default:64},p:{type:v,default:2},q:{type:v,default:3}},computed:{inst:function(){return new e.TorusKnotBufferGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.tubularSegments,10),parseInt(this.radialSegments,10),parseInt(this.p,10),parseInt(this.q,10))}}},Et={mixins:[Z],props:{dir:{type:N,validator:K},length:{type:y,default:1},color:{type:F,default:"#ff0"},headLength:y,headWidth:y},computed:{inst:function(){return new e.ArrowHelper(new e.Vector3(0,1,0),new e.Vector3)},len:function(){return[parseFloat(this.length),void 0!==this.headLength?parseFloat(this.headLength):void 0,void 0!==this.headWidth?parseFloat(this.headWidth):void 0]}},watch:{inst:{handler:function(t){this.dir&&t.setDirection(B(this.dir).normalize()),t.setLength.apply(t,p(this.len)),t.setColor(new e.Color(this.color))},immediate:!0},dir:function(t){this.inst.setDirection(B(t).normalize()),this.vglObject3d.emit()},len:function(t){var e;(e=this.inst).setLength.apply(e,p(t)),this.vglObject3d.emit()},color:function(t){this.inst.setColor(new e.Color(t)),this.vglObject3d.emit()}}},It={mixins:[Z],props:{color:{type:F,default:"#ff0"},object:{type:w,required:!0,validator:W}},computed:{inst:function(){return new e.BoxHelper(void 0,this.color)}},methods:{setFromObject:function(t){this.inst.setFromObject(t)}},beforeDestroy:function(){void 0!==this.object&&this.vglNamespace.object3ds.unlisten(this.object,this.setFromObject)},watch:{inst:function(){void 0!==this.object&&this.setFromObject(this.vglNamespace.object3ds.get(this.object))},object:{handler:function(t,e){var i=this.vglNamespace.object3ds,s=this.setFromObject;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(this.vglNamespace.object3ds.get(t)))},immediate:!0}}},zt={mixins:[at],props:{distance:{type:y,default:0},decay:{type:y,default:1}},computed:{inst:function(){return new e.PointLight}},watch:{inst:{handler:function(t){Object.assign(t,{distance:parseFloat(this.distance),decay:parseFloat(this.decay)})},immediate:!0},distance:function(t){this.inst.distance=parseFloat(t),this.vglObject3d.emit()},decay:function(t){this.inst.decay=parseFloat(t),this.vglObject3d.emit()}}},Ut={mixins:[at],props:{distance:{type:y,default:0},decay:{type:y,default:1},angle:{type:y,default:Math.PI/3},penumbra:{type:y,default:0},target:{type:N,validator:K}},computed:{inst:function(){return new e.SpotLight}},beforeDestroy:function(){this.inst.target.parent&&this.inst.target.parent.remove(this.inst.target)},watch:{inst:{handler:function(t){Object.assign(t,{distance:parseFloat(this.distance),decay:parseFloat(this.decay),angle:parseFloat(this.angle),penumbra:parseFloat(this.penumbra)}),this.target&&t.target.position.copy(B(this.target)),this.parent&&this.parent.add(t.target)},immediate:!0},parent:function(t){t.add(this.inst.target)},distance:function(t){this.inst.distance=parseFloat(t),this.vglObject3d.emit()},decay:function(t){this.inst.decay=parseFloat(t),this.vglObject3d.emit()},angle:function(t){this.inst.angle=parseFloat(t),this.vglObject3d.emit()},penumbra:function(t){this.inst.penumbra=parseFloat(t),this.vglObject3d.emit()},target:function(t){this.inst.target.position.copy(B(t)),this.vglObject3d.emit()}}},$t={uv:e.UVMapping,"cube-reflection":e.CubeReflectionMapping,"cube-refraction":e.CubeRefractionMapping,"equirectangular-reflection":e.EquirectangularReflectionMapping,"equirectangular-refraction":e.EquirectangularRefractionMapping,"cube-uv-reflection":e.CubeUVReflectionMapping,"cube-uv-refraction":e.CubeUVRefractionMapping},qt={repeat:e.RepeatWrapping,"clamp-to-edge":e.ClampToEdgeWrapping,"mirrored-repeat":e.MirroredRepeatWrapping},Ht={nearest:e.NearestFilter,"nearest-mip-map-nearest":e.NearestMipMapNearestFilter,"nearest-mip-map-linear":e.NearestMipMapLinearFilter,linear:e.LinearFilter,"linear-mip-map-nearest":e.LinearMipMapNearestFilter,"linear-mip-map-linear":e.LinearMipMapLinearFilter},Wt={alpha:e.AlphaFormat,rgb:e.RGBFormat,rgba:e.RGBAFormat,luminance:e.LuminanceFormat,"luminance-alpha":e.LuminanceAlphaFormat,rgbe:e.RGBEFormat,depth:e.DepthFormat,"depth-stencil":e.DepthStencilFormat},Qt={"unsigned-byte":e.UnsignedByteType,byte:e.ByteType,short:e.ShortType,"unsigned-short":e.UnsignedShortType,int:e.IntType,"unsigned-int":e.UnsignedIntType,float:e.FloatType,"half-float":e.HalfFloatType,"unsigned-short-4444":e.UnsignedShort4444Type,"unsigned-short-5551":e.UnsignedShort5551Type,"unsigned-short-565":e.UnsignedShort565Type,"unsigned-int-248":e.UnsignedInt248Type},_t={linear:e.LinearEncoding,"s-rgb":e.sRGBEncoding,gamma:e.GammaEncoding,rgbe:e.RGBEEncoding,"log-luv":e.LogLuvEncoding,rgbm7:e.RGBM7Encoding,rgbm16:e.RGBM16Encoding,rgbde:e.RGBDEncoding,"basic-depth":e.BasicDepthPacking,"rgba-depth":e.RGBADepthPacking},Kt={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{src:b,name:{type:w,required:!0,validator:W},mapping:{type:b,default:"uv"},wrapS:{type:b,default:"clamp-to-edge"},wrapT:{type:b,default:"clamp-to-edge"},magFilter:{type:b,default:"linear"},minFilter:{type:b,default:"linear-mip-map-linear"},anisotropy:{type:v,default:1},format:b,type:{type:b,default:"unsigned-byte"},offset:{type:j,validator:_},repeat:{type:j,validator:_},rotation:{type:y,default:0},center:{type:j,validator:_},premultiplyAlpha:g,unpackAlignment:{type:v,default:4},encoding:{type:b,default:"linear"}},computed:{inst:function(){var t=this;return(new e.TextureLoader).load(this.src,(function(e){t.format&&Object.assign(e,{format:Wt[t.format]}),t.update()}))}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.textures.emit(this.name,this.inst)}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.textures.delete(this.name,this.inst)},watch:{inst:{handler:function(t){Object.assign(t,{mapping:$t[this.mapping],wrapS:qt[this.wrapS],wrapT:qt[this.wrapT],magFilter:Ht[this.magFilter],minFilter:Ht[this.minFilter],anisotropy:parseInt(this.anisotropy,10),type:Qt[this.type],rotation:parseFloat(this.rotation),premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:parseInt(this.unpackAlignment,10),encoding:_t[this.encoding]}),this.offset&&t.offset.copy(P(this.offset)),this.repeat&&t.repeat.copy(P(this.repeat)),this.center&&t.center.copy(P(this.center)),void 0!==this.name&&this.vglNamespace.textures.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.textures.delete(e,this.inst),void 0!==t&&this.vglNamespace.textures.set(t,this.inst)},mapping:function(t){this.inst.mapping=$t[t],this.update()},wrapS:function(t){this.inst.wrapS=qt[t],this.update()},wrapT:function(t){this.inst.wrapT=qt[t],this.update()},magFilter:function(t){this.inst.magFilter=Ht[t],this.update()},minFilter:function(t){this.inst.minFilter=Ht[t],this.update()},anisotropy:function(t){this.inst.anisotropy=parseInt(t,10),this.update()},format:function(t){this.inst.format=Wt[t],this.update()},type:function(t){this.inst.type=Qt[t],this.update()},offset:function(t){this.inst.offset.copy(P(t)),this.update()},repeat:function(t){this.inst.repeat.copy(P(t)),this.update()},rotation:function(t){this.inst.rotation=parseFloat(t),this.update()},center:function(t){this.inst.center.copy(P(t)),this.update()},premultiplyAlpha:function(t){this.inst.premultiplyAlpha=t,this.update()},unpackAlignment:function(t){this.inst.unpackAlignment=parseInt(t,10),this.update()},encoding:function(t){this.inst.encoding=_t[t],this.update()}},render:function(t){return this.$slots.default?t("template",this.$slots.default):void 0}},Xt={mixins:[gt],props:{shapes:{type:S,validator:Q},curveSegments:v,steps:v,depth:y,bevelEnabled:g,bevelThickness:y,bevelSize:y,bevelOffset:y,bevelSegments:v,extrudePath:Object,uvGenerator:Object},computed:{options:function(){var t=this.curveSegments,e=this.steps,i=this.depth,s=this.bevelEnabled,n=this.bevelThickness,a=this.bevelSize,r=this.bevelOffset,l=this.bevelSegments,h=this.extrudePath,c=this.uvGenerator;return o(o(o(o(o(o(o(o(o(o({},null!=t&&{curveSegments:parseInt(t,10)}),null!=e&&{steps:parseInt(e,10)}),null!=i&&{depth:parseFloat(i)}),null!=s&&{bevelEnabled:s}),null!=n&&{bevelThickness:parseFloat(n)}),null!=a&&{bevelSize:parseFloat(a)}),null!=r&&{bevelOffset:parseFloat(r)}),null!=l&&{bevelSegments:parseInt(l,10)}),null!=h&&{extrudePath:h}),null!=c&&{UVGenerator:c})},inst:function(){return new e.ExtrudeBufferGeometry(this.shapeObjects,this.options)}}},Yt=Object.create(null),Zt={mixins:[Xt],props:{text:{type:b,default:""},font:b,size:{type:y,default:100},height:{type:y,default:50},curveSegments:{type:v,default:12},bevelEnabled:g,bevelThickness:{type:y,default:10},bevelSize:{type:y,default:8},bevelSegments:{type:v,default:3}},data:function(){return{f:void 0}},computed:{inst:function(){return void 0!==this.f?new e.TextBufferGeometry(this.text,{font:Yt[this.f],size:parseFloat(this.size),height:parseFloat(this.height),curveSegments:parseInt(this.curveSegments,10),bevelEnabled:this.bevelEnabled,bevelThickness:parseFloat(this.bevelThickness),bevelSize:parseFloat(this.bevelSize),bevelSegments:parseInt(this.bevelSegments,10)}):new e.BufferGeometry}},watch:{font:{handler:function(t){var i=this;Yt[t]?Yt[t].isFont?this.f=t:Yt[t].push((function(){t===i.font&&(i.f=t)})):(Yt[t]=[function(){t===i.font&&(i.f=t)}],(new e.FontLoader).load(t,(function(e){var s=Yt[t];Yt[t]=e,s.forEach((function(t){t()})),i.vglNamespace.geometries.emit(i.name,i.inst)}))),this.vglNamespace.geometries.emit(this.name,this.inst)},immediate:!0}}},Jt={mixins:[mt],props:{color:{type:F,default:"#fff"},map:{type:w,validator:W}},computed:{inst:function(){return new e.SpriteMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},te={mixins:[Z],props:{size:{type:y,default:10},divisions:{type:v,default:10},colorCenterLine:{type:F,default:"#444444"},colorGrid:{type:F,default:"#888888"}},computed:{inst:function(){return new e.GridHelper(parseFloat(this.size),parseInt(this.divisions,10),this.colorCenterLine,this.colorGrid)}}},ee={mixins:[ht],computed:{inst:function(){return new e.ShadowMaterial}}},ie={mixins:[Z],props:{camera:{type:w,required:!0,validator:W}},data:function(){return{exist:!1}},computed:{inst:function(){if(!this.exist)return new e.Object3D;var t=this.vglNamespace.cameras.get(this.camera);return t.updateProjectionMatrix(),new e.CameraHelper(t)}},methods:{update:function(t){t?(this.exist=!0,t.updateProjectionMatrix(),this.inst.camera=t,this.inst.update(),this.vglObject3d.emit()):this.exist=!1}},beforeDestroy:function(){this.vglNamespace.cameras.unlisten(this.camera,this.update)},watch:{camera:{handler:function(t,e){void 0!==e&&this.vglNamespace.cameras.unlisten(e,this.update),this.vglNamespace.cameras.listen(t,this.update),this.exist=!!this.vglNamespace.cameras.get(t)},immediate:!0}}},se={mixins:[Z],props:{color:F,size:{type:y,default:1},light:{type:w,required:!0,validator:W}},data:function(){return{lightUuid:null}},computed:{inst:function(){if(!this.lightUuid)return new e.Object3D;var t=this.vglNamespace.object3ds.get(this.light);return new e.DirectionalLightHelper(t,parseFloat(this.size))}},methods:{setLightUuid:function(t){this.lightUuid=t?t.uuid:null,this.inst.update()}},beforeDestroy:function(){void 0!==this.light&&this.vglNamespace.object3ds.unlisten(this.light,this.setLightUuid)},watch:{inst:function(t){this.lightUuid&&void 0!==this.color&&Object.assign(t,{color:this.color}).update()},light:{handler:function(t,e){if(void 0!==e&&this.vglNamespace.object3ds.unlisten(e,this.setLightUuid),void 0!==t){this.vglNamespace.object3ds.listen(t,this.setLightUuid);var i=this.vglNamespace.object3ds.get(this.light);this.setLightUuid(i)}},immediate:!0},color:{handler:function(t){this.lightUuid&&(this.inst.color=t,this.inst.update())},immediate:!0}}},ne={mixins:[Z],props:{radius:{type:y,default:10},radials:{type:v,default:16},circles:{type:v,default:8},divisions:{type:v,default:64},color1:{type:F,default:"#444444"},color2:{type:F,default:"#888888"}},computed:{inst:function(){return new e.PolarGridHelper(parseFloat(this.radius),parseInt(this.radials,10),parseInt(this.circles,10),parseInt(this.divisions,10),this.color1,this.color2)}}},ae={mixins:[mt],props:{color:{type:F,default:"#fff"},map:{type:w,validator:W}},computed:{inst:function(){return new e.MeshBasicMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},re={mixins:[mt],props:{fog:g,map:{type:w,validator:W}},computed:{inst:function(){return new e.MeshDepthMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{fog:this.fog})},immediate:!0},fog:function(t){this.inst.fog=t,this.update()}}},oe={mixins:[mt],props:{color:{type:F,default:"#fff"},map:{type:w,validator:W}},computed:{inst:function(){return new e.MeshLambertMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},le={mixins:[ht],props:{color:{type:F,default:"#fff"},linewidth:{type:y,default:1},dashSize:{type:y,default:3},gapSize:{type:y,default:1}},computed:{inst:function(){return new e.LineDashedMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{dashSize:parseFloat(this.dashSize),gapSize:parseFloat(this.gapSize),linewidth:parseFloat(this.linewidth)}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},dashSize:function(t){this.inst.dashSize=parseFloat(t),this.update()},gapSize:function(t){this.inst.gapSize=parseFloat(t),this.update()}}},he={mixins:[ht],props:{fog:g},computed:{inst:function(){return new e.MeshNormalMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{fog:this.fog})},immediate:!0},fog:function(t){this.inst.fog=t,this.update()}}},ce={mixins:[mt],props:{color:{type:F,default:"#fff"},map:{type:w,validator:W},specular:{type:F,default:"#111111"},shininess:{type:y,default:30}},computed:{inst:function(){return new e.MeshPhongMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{shininess:parseFloat(this.shininess)}),t.specular.setStyle(this.specular),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},specular:function(t){this.inst.specular.setStyle(t),this.update()},shininess:function(t){this.inst.shininess=parseFloat(t),this.update()}}},ue={mixins:[mt],props:{color:{type:F,default:"#fff"},map:{type:w,validator:W}},computed:{inst:function(){return new e.MeshToonMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},pe={mixins:[vt],props:{clearcoat:{type:y,default:0},clearcoatRoughness:{type:y,default:0},reflectivity:{type:y,default:.5}},computed:{inst:function(){return new e.MeshPhysicalMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{clearcoat:parseFloat(this.clearcoat),clearcoatRoughness:parseFloat(this.clearcoatRoughness),reflectivity:parseFloat(this.reflectivity)})},immediate:!0},clearcoat:function(t){this.inst.clearcoat=parseFloat(t),this.update()},clearcoatRoughness:function(t){this.inst.clearcoatRoughness=parseFloat(t),this.update()},reflectivity:function(t){this.inst.reflectivity=parseFloat(t),this.update()}}},de={mixins:[mt],props:{defines:{type:Object,default:function(){return{}}},fog:{type:g,default:!1},fragmentShader:{type:b},lights:{type:g,default:!1},linewidth:{type:y,default:1},flatShading:{type:g,default:!1},uniforms:{type:Object,default:function(){return{}}},vertexShader:{type:b},wireframe:{type:g,default:!1},wireframeLinewidth:{type:y,default:1}},computed:{inst:function(){return new e.ShaderMaterial({fog:this.fog,lights:this.lights})}},watch:{inst:{handler:function(t){Object.assign(t,{defines:this.defines,fog:this.fog,fragmentShader:this.fragmentShader||t.fragmentShader,lights:this.lights,linewidth:parseFloat(this.linewidth),flatShading:this.flatShading,uniforms:this.uniforms,vertexShader:this.vertexShader||t.vertexShader,wireframe:this.wireframe,wireframeLinewidth:parseFloat(this.wireframeLinewidth)})},immediate:!0},defines:{handler:function(t){this.inst.defines=t,this.update()},deep:!0},fragmentShader:function(t){this.inst.fragmentShader=t,this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},flatShading:function(t){this.inst.flatShading=t,this.update()},uniforms:{handler:function(t){this.inst.uniforms=t,this.update()},deep:!0},vertexShader:function(t){this.inst.vertexShader=t,this.update()},wireframe:function(t){this.inst.wireframe=t,this.update()},wireframeLinewidth:function(t){this.inst.wireframeLinewidth=parseFloat(t),this.update()}}},fe={mixins:[ut],props:{points:{type:M,required:!0,validator:Y},segments:{type:v,default:12},phiStart:{type:y,default:0},phiLength:{type:y,default:2*Math.PI}},computed:{inst:function(){return new e.LatheBufferGeometry(U(this.points),parseInt(this.segments,10),parseFloat(this.phiStart),parseFloat(this.phiLength))}}},me={mixins:[Z],props:{color:F,light:{type:w,required:!0,validator:W}},data:function(){return{lightUuid:null}},computed:{inst:function(){if(!this.lightUuid)return new e.Object3D;var t=this.vglNamespace.object3ds.get(this.light);return new e.SpotLightHelper(t)}},methods:{setLightUuid:function(t){this.lightUuid=t?t.uuid:null,this.inst.update()}},beforeDestroy:function(){void 0!==this.light&&this.vglNamespace.object3ds.unlisten(this.light,this.setLightUuid)},watch:{inst:function(t){this.lightUuid&&void 0!==this.color&&Object.assign(t,{color:this.color}).update()},light:{handler:function(t,e){if(void 0!==e&&this.vglNamespace.object3ds.unlisten(e,this.setLightUuid),void 0!==t){this.vglNamespace.object3ds.listen(t,this.setLightUuid);var i=this.vglNamespace.object3ds.get(this.light);this.setLightUuid(i)}},immediate:!0},color:{handler:function(t){this.lightUuid&&(this.inst.color=t,this.inst.update())},immediate:!0}}},ge={mixins:[at],props:{groundColor:{type:F,default:"#fff"}},computed:{inst:function(){return new e.HemisphereLight}},watch:{inst:{handler:function(t){t.groundColor.setStyle(this.groundColor)},immediate:!0},groundColor:function(t){this.inst.groundColor.setStyle(t),this.vglObject3d.emit()}}},ve={mixins:[at],props:{width:{type:y,default:10},height:{type:y,default:10}},computed:{inst:function(){return new e.RectAreaLight}},watch:{inst:{handler:function(t){Object.assign(t,{width:parseFloat(this.width),height:parseFloat(this.height)})},immediate:!0},width:function(t){this.inst.width=parseFloat(t),this.vglObject3d.emit()},height:function(t){this.inst.height=parseFloat(t),this.vglObject3d.emit()}}},ye={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:w,required:!0,validator:W}},computed:{inst:function(){return new e.Curve}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.curves.delete(this.name,this.inst)},watch:{inst:{handler:function(t){void 0!==this.name&&this.vglNamespace.curves.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.curves.delete(e,this.inst),void 0!==t&&this.vglNamespace.curves.set(t,this.inst)}},render:function(t){return this.$slots.default?t("template",this.$slots.default):void 0}},be={mixins:[ye],props:{autoClose:g},computed:{inst:function(){return new e.CurvePath}},watch:{inst:{handler:function(t){Object.assign(t,{autoClose:this.autoClose})},immediate:!0},autoClose:function(t){this.inst.autoClose=t}}},we={mixins:[be],props:{path:{type:M,validator:Y}},computed:{inst:function(){var t=new e.Path;return void 0!==this.path&&t.setFromPoints(U(this.path)),t}}},Se={mixins:[we],computed:{inst:function(){var t=new e.Shape;return void 0!==this.path&&t.setFromPoints(U(this.path)),t}}},Fe={mixins:[gt],props:{shapes:{type:S,validator:Q},curveSegments:{type:v,default:12}},computed:{inst:function(){return new e.ShapeBufferGeometry(this.shapeObjects,parseInt(this.curveSegments,10))}}},je={mixins:[ut],props:{vertices:{type:L,validator:X},indices:{type:V,validator:function(t){return(Array.isArray(t)?t:t.split(",")).every(H)}},radius:{type:y,default:1},detail:{type:v,default:0}},computed:{inst:function(){var t=z(this.vertices).map(parseFloat),i=function(t){return z(t).map((function(t){return parseInt(t,10)}))}(this.indices),s=parseFloat(this.radius),n=parseInt(this.detail,10);return new e.PolyhedronBufferGeometry(t,i,s,n)}}};t.VglAmbientLight=ot,t.VglArrowHelper=Et,t.VglAxesHelper=Vt,t.VglBoxGeometry=jt,t.VglBoxHelper=It,t.VglCamera=tt,t.VglCameraHelper=ie,t.VglCircleGeometry=Nt,t.VglConeGeometry=Lt,t.VglCurve=ye,t.VglCurvePath=be,t.VglCylinderGeometry=At,t.VglDirectionalLight=rt,t.VglDirectionalLightHelper=se,t.VglDodecahedronGeometry=Rt,t.VglExtrudeGeometry=Xt,t.VglGeometry=ut,t.VglGridHelper=te,t.VglGroup=nt,t.VglHemisphereLight=ge,t.VglIcosahedronGeometry=Ct,t.VglLatheGeometry=fe,t.VglLight=at,t.VglLine=St,t.VglLineBasicMaterial=wt,t.VglLineDashedMaterial=le,t.VglLineLoop=Ot,t.VglLineSegments=xt,t.VglMaterial=ht,t.VglMesh=yt,t.VglMeshBasicMaterial=ae,t.VglMeshDepthMaterial=re,t.VglMeshLambertMaterial=oe,t.VglMeshNormalMaterial=he,t.VglMeshPhongMaterial=ce,t.VglMeshPhysicalMaterial=pe,t.VglMeshStandardMaterial=vt,t.VglMeshToonMaterial=ue,t.VglNamespace=R,t.VglObject3d=Z,t.VglOctahedronGeometry=Gt,t.VglOrthographicCamera=Mt,t.VglPath=we,t.VglPerspectiveCamera=st,t.VglPlaneGeometry=kt,t.VglPointLight=zt,t.VglPoints=bt,t.VglPointsMaterial=ct,t.VglPolarGridHelper=ne,t.VglPolyhedronGeometry=je,t.VglRectAreaLight=ve,t.VglRenderer=it,t.VglRingGeometry=Tt,t.VglScene=J,t.VglShaderMaterial=de,t.VglShadowMaterial=ee,t.VglShape=Se,t.VglShapeGeometry=Fe,t.VglSphereGeometry=pt,t.VglSpotLight=Ut,t.VglSpotLightHelper=me,t.VglSprite=Ft,t.VglSpriteMaterial=Jt,t.VglTetrahedronGeometry=Pt,t.VglTextGeometry=Zt,t.VglTexture=Kt,t.VglTorusGeometry=Bt,t.VglTorusKnotGeometry=Dt,Object.defineProperty(t,"__esModule",{value:!0})}));
