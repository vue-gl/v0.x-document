(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports,require('three')):'function'==typeof define&&define.amd?define(['exports','three'],b):b(a.VueGL={},a.THREE)})(this,function(a,b){'use strict';function c(a){var b=a.$parent;if(b)return b.$options.isVglAssets?b:c(b)}function d(a,b){return Object.create(a&&a.assets[b])}function e(a){var c=new b.Vector3;switch('undefined'==typeof a?'undefined':p(a)){case'number':c.setScalar(a);break;case'object':Array.isArray(a)?1===a.length?c.setScalar(parseFloat(a[0])):c.fromArray(a.map(function(a){return parseFloat(a)})):c.setX(parseFloat(a.x||0)).setY(parseFloat(a.y||0)).setZ(parseFloat(a.z||0));break;case'string':if(a.includes(';')){var d=a.split(';').map(function(a){return a.split(':')}),e=d.reduce(function(a,b){return a[b[0].trim()]=b[1],a},{});c.setX(parseFloat(e.x)).setY(parseFloat(e.y)).setZ(parseFloat(e.z))}else{var f=a.trim().split(/\s+/);1===f.length?c.setScalar(parseFloat(f[0])):c.fromArray(f.map(function(a){return parseFloat(a)}))}}return c}function f(a){var c=new b.Euler;switch('undefined'==typeof a?'undefined':p(a)){case'object':if(Array.isArray(a))c.fromArray(a.map(function(a,b){return 3>b?parseFloat(a):a.trim()}));else{var d=parseFloat(a.x||0),f=parseFloat(a.y||0),g=parseFloat(a.z||0);c.set(d,f,g,a.order&&a.order.trim())}break;case'string':if(a.includes(';')){var h=a.split(';').map(function(a){return a.split(':')}),i=h.reduce(function(a,b){return a[b[0].trim()]=b[1],a},{}),e=parseFloat(i.x),j=parseFloat(i.y),k=parseFloat(i.z);c.set(e,j,k,i.order&&i.order.trim())}else{var l=a.trim().split(/\s+/);c.fromArray(l.map(function(a,b){return 3>b?parseFloat(a):a.trim()}))}}return c}function g(a){var c=new b.Spherical;switch('undefined'==typeof a?'undefined':p(a)){case'number':c.radius=a;break;case'object':if(Array.isArray(a))c.set.apply(c,r(a.map(function(a){return parseFloat(a)})));else{var d=parseFloat(a.radius||1),e=parseFloat(a.phi||0),f=parseFloat(a.theta||0);c.set(d,e,f)}break;case'string':if(a.includes(';')){var g=a.split(';').map(function(a){return a.split(':')}),h=g.reduce(function(a,b){return a[b[0].trim()]=b[1],a},{}),i=parseFloat(h.radius),j=parseFloat(h.phi),k=parseFloat(h.theta);c.set(i,j,k)}else{var l=a.trim().split(/\s+/);c.set.apply(c,r(l.map(function(a){return parseFloat(a)})))}}return c.makeSafe()}function h(a){return'string'==typeof a?parseFloat(a):a}function i(a){var b=a.$parent;if(b)return b.$options.isVglObject3d?b:i(b)}function j(a,b){var c=b.clientWidth,d=b.clientHeight;a.isPerspectiveCamera?a.aspect=c/d:(a.left=c/-2,a.right=c/2,a.top=d/2,a.bottom=d/-2),a.updateProjectionMatrix()}function k(a,b){a.setSize(b.clientWidth,b.clientHeight,!1)}function l(a){return Object.getPrototypeOf(a.assets.materials)}function m(a){return Object.getPrototypeOf(a.assets.geometries)}var n=String.prototype,o={isVglAssets:!0,data:function(){var a=c(this)||null;return{assets:{materials:d(a,'materials'),geometries:d(a,'geometries'),attributes:d(a,'attributes')}}},render:function(a){if(this.$slots.default)return a('div',this.$slots.default)}},p='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},q=function(){function a(a){this.value=a}function b(b){function c(e,f){try{var g=b[e](f),h=g.value;h instanceof a?Promise.resolve(h.value).then(function(a){c('next',a)},function(a){c('throw',a)}):d(g.done?'return':'normal',g.value)}catch(a){d('throw',a)}}function d(a,b){'return'===a?e.resolve({value:b,done:!0}):'throw'===a?e.reject(b):e.resolve({value:b,done:!1}),e=e.next,e?c(e.key,e.arg):f=null}var e,f;this._invoke=function(a,b){return new Promise(function(d,g){var h={key:a,arg:b,resolve:d,reject:g,next:null};f?f=f.next=h:(e=f=h,c(a,b))})},'function'!=typeof b.return&&(this.return=void 0)}return'function'==typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this}),b.prototype.next=function(a){return this._invoke('next',a)},b.prototype.throw=function(a){return this._invoke('throw',a)},b.prototype.return=function(a){return this._invoke('return',a)},{wrap:function(a){return function(){return new b(a.apply(this,arguments))}},await:function(b){return new a(b)}}}(),r=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)};/*
 Copyright (c) 2010, Linden Research, Inc.
 Copyright (c) 2014, Joshua Bell

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$
 */// Original can be found at:
//   https://bitbucket.org/lindenlab/llsd
// Modifications by Joshua Bell inexorabletash@gmail.com
//   https://github.com/inexorabletash/polyfill
// ES3/ES5 implementation of the Krhonos Typed Array Specification
//   Ref: http://www.khronos.org/registry/typedarray/specs/latest/
//   Date: 2011-02-01
//
// Variations:
//  * Allows typed_array.get/set() as alias for subscripts (typed_array[])
//  * Gradually migrating structure from Khronos spec to ES2015 spec
//
// Caveats:
//  * Beyond 10000 or so entries, polyfilled array accessors (ta[0],
//    etc) become memory-prohibitive, so array creation will fail. Set
//    self.TYPED_ARRAY_POLYFILL_NO_ARRAY_ACCESSORS=true to disable
//    creation of accessors. Your code will need to use the
//    non-standard get()/set() instead, and will need to add those to
//    native arrays for interop.
(function(a){// Approximations of internal ECMAScript conversion functions
function b(a){switch('undefined'==typeof a?'undefined':p(a)){case'undefined':return'undefined';case'boolean':return'boolean';case'number':return'number';case'string':return'string';default:return null===a?'null':'object';}}// Class returns internal [[Class]] property, used to avoid cross-frame instanceof issues:
function c(a){return Object.prototype.toString.call(a).replace(/^\[object *|\]$/g,'')}function d(a){return'function'==typeof a}function e(a){if(null===a||a===void 0)throw TypeError();return Object(a)}function f(a){return a>>0}function g(a){return a>>>0}// Snapshot intrinsics
// ES5: Make obj[index] an alias for obj._getter(index)/obj._setter(index, value)
// for index in 0 ... obj.length
function h(b){function c(a){Object.defineProperty(b,a,{get:function(){return b._getter(a)},set:function(c){b._setter(a,c)},enumerable:!0,configurable:!1})}if(!('TYPED_ARRAY_POLYFILL_NO_ARRAY_ACCESSORS'in a)){if(b.length>E)throw RangeError('Array too large for polyfill');var d;for(d=0;d<b.length;d+=1)c(d)}}// Internal conversion functions:
//    pack<Type>()   - take a number (interpreted as Type), output a byte array
//    unpack<Type>() - take a byte array, output a Type-like number
function i(a,b){var c=32-b;return a<<c>>c}function j(a,b){var c=32-b;return a<<c>>>c}function k(a){return[255&a]}function l(a){return i(a[0],8)}function m(a){return[255&a]}function n(a){return j(a[0],8)}function o(a){return a=M(+a),[0>a?0:255<a?255:255&a]}function q(a){return[255&a,255&a>>8]}function r(a){return i(a[1]<<8|a[0],16)}function s(a){return[255&a,255&a>>8]}function t(a){return j(a[1]<<8|a[0],16)}function u(a){return[255&a,255&a>>8,255&a>>16,255&a>>24]}function v(a){return i(a[3]<<24|a[2]<<16|a[1]<<8|a[0],32)}function w(a){return[255&a,255&a>>8,255&a>>16,255&a>>24]}function x(a){return j(a[3]<<24|a[2]<<16|a[1]<<8|a[0],32)}function y(a,b,c){function g(a){var b=H(a),c=a-b;return 0.5>c?b:0.5<c?b+1:b%2?b+1:b}// Compute sign, exponent, fraction
var h,j,e,f=(1<<b-1)-1;if(a!==a)j=(1<<b)-1,e=L(2,c-1),h=0;else if(a===Infinity||a===-Infinity)j=(1<<b)-1,e=0,h=0>a?1:0;else if(0===a)j=0,e=0,h=1/a==-Infinity?1:0;else if(h=0>a,a=G(a),a>=L(2,1-f)){j=K(H(I(a)/F),1023);var k=a/L(2,j);1>k&&(j-=1,k*=2),2<=k&&(j+=1,k/=2);var l=L(2,c);e=g(k*l)-l,j+=f,1<=e/l&&(j+=1,e=0),j>2*f&&(j=(1<<b)-1,e=0)}else j=0,e=g(a/L(2,1-f-c));// Pack sign, exponent, fraction
var d,i=[];for(d=c;d;d-=1)i.push(e%2?1:0),e=H(e/2);for(d=b;d;d-=1)i.push(j%2?1:0),j=H(j/2);i.push(h?1:0),i.reverse();// Bits to bytes
for(var m=i.join(''),n=[];m.length;)n.unshift(parseInt(m.substring(0,8),2)),m=m.substring(8);return n}function z(a,c,d){// Bytes to bits
var g,h,i,b,j,k,l,e,f=[];for(g=0;g<a.length;++g)for(i=a[g],h=8;h;h-=1)f.push(i%2?1:0),i>>=1;// Produce number
return f.reverse(),b=f.join(''),j=(1<<c-1)-1,k=parseInt(b.substring(0,1),2)?-1:1,l=parseInt(b.substring(1,1+c),2),e=parseInt(b.substring(1+c),2),l===(1<<c)-1?0===e?k*Infinity:NaN:0<l?k*L(2,l-j)*(1+e/L(2,d)):0===e?0>k?-0:0:k*L(2,-(j-1))*(e/L(2,d))}function A(a){return z(a,11,52)}function B(a){return y(a,11,52)}function C(a){return z(a,8,23)}function D(a){return y(a,8,23)}//
// 3 The ArrayBuffer Type
//
var E=1e5,F=Math.LN2,G=Math.abs,H=Math.floor,I=Math.log,J=Math.max,K=Math.min,L=Math.pow,M=Math.round;// Paranoia
// Beyond this value, index getters/setters (i.e. array[0], array[1]) are so slow to
// create, and consume so much memory, that the browser appears frozen.
// emulate ES5 getter/setter API using legacy APIs
// http://blogs.msdn.com/b/ie/archive/2010/09/07/transitioning-existing-code-to-the-es5-getter-setter-apis.aspx
// (second clause tests for Object.defineProperty() in IE<9 that only supports extending DOM prototypes, but
// note that IE<9 does not support __defineGetter__ or __defineSetter__ so it just renders the method harmless)
(function(){var a=Object.defineProperty,b=!function(){try{return Object.defineProperty({},'x',{})}catch(a){return!1}}();(!a||b)&&(Object.defineProperty=function(b,c,d){// In IE8 try built-in implementation for defining properties on DOM prototypes.
if(a)try{return a(b,c,d)}catch(a){}if(b!==Object(b))throw TypeError('Object.defineProperty called on non-object');return Object.prototype.__defineGetter__&&'get'in d&&Object.prototype.__defineGetter__.call(b,c,d.get),Object.prototype.__defineSetter__&&'set'in d&&Object.prototype.__defineSetter__.call(b,c,d.set),'value'in d&&(b[c]=d.value),b})})(),function(){function j(a){if(a=f(a),0>a)throw RangeError('ArrayBuffer size is not a small enough positive integer.');Object.defineProperty(this,'byteLength',{value:a}),Object.defineProperty(this,'_bytes',{value:Array(a)});for(var b=0;b<a;b+=1)this._bytes[b]=0}//
// 5 The Typed Array View Types
//
function i(){// %TypedArray% ( length )
if(!arguments.length||'object'!==p(arguments[0]))return function(a){if(a=f(a),0>a)throw RangeError('length is not a small enough positive integer.');Object.defineProperty(this,'length',{value:a}),Object.defineProperty(this,'byteLength',{value:a*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,'buffer',{value:new j(this.byteLength)}),Object.defineProperty(this,'byteOffset',{value:0})}.apply(this,arguments);// %TypedArray% ( typedArray )
if(1<=arguments.length&&'object'===b(arguments[0])&&arguments[0]instanceof i)return function(a){if(this.constructor!==a.constructor)throw TypeError();var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,'buffer',{value:new j(b)}),Object.defineProperty(this,'byteLength',{value:b}),Object.defineProperty(this,'byteOffset',{value:0}),Object.defineProperty(this,'length',{value:a.length});for(var c=0;c<this.length;c+=1)this._setter(c,a._getter(c))}.apply(this,arguments);// %TypedArray% ( array )
if(1<=arguments.length&&'object'===b(arguments[0])&&!(arguments[0]instanceof i)&&!(arguments[0]instanceof j||'ArrayBuffer'===c(arguments[0])))return function(a){var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,'buffer',{value:new j(b)}),Object.defineProperty(this,'byteLength',{value:b}),Object.defineProperty(this,'byteOffset',{value:0}),Object.defineProperty(this,'length',{value:a.length});for(var c,d=0;d<this.length;d+=1)c=a[d],this._setter(d,+c)}.apply(this,arguments);// %TypedArray% ( buffer, byteOffset=0, length=undefined )
if(1<=arguments.length&&'object'===b(arguments[0])&&(arguments[0]instanceof j||'ArrayBuffer'===c(arguments[0])))return function(a,b,c){if(b=g(b),b>a.byteLength)throw RangeError('byteOffset out of range');// The given byteOffset must be a multiple of the element
// size of the specific type, otherwise an exception is raised.
if(b%this.BYTES_PER_ELEMENT)throw RangeError('buffer length minus the byteOffset is not a multiple of the element size.');if(void 0===c){var d=a.byteLength-b;if(d%this.BYTES_PER_ELEMENT)throw RangeError('length of buffer minus byteOffset not a multiple of the element size');c=d/this.BYTES_PER_ELEMENT}else c=g(c),d=c*this.BYTES_PER_ELEMENT;if(b+d>a.byteLength)throw RangeError('byteOffset and length reference an area beyond the end of the buffer');Object.defineProperty(this,'buffer',{value:a}),Object.defineProperty(this,'byteLength',{value:d}),Object.defineProperty(this,'byteOffset',{value:b}),Object.defineProperty(this,'length',{value:c})}.apply(this,arguments);// %TypedArray% ( all other argument combinations )
throw TypeError()}// Properties of the %TypedArray Instrinsic Object
// %TypedArray%.from ( source , mapfn=undefined, thisArg=undefined )
// %TypedArray%.prototype.toLocaleString ( )
// %TypedArray%.prototype.toString ( )
// %TypedArray%.prototype.values ( )
// %TypedArray%.prototype [ @@iterator ] ( )
// get %TypedArray%.prototype [ @@toStringTag ]
// -- defined in es6.js to shim browsers w/ native TypedArrays
function y(a,b,c){// Each TypedArray type requires a distinct constructor instance with
// identical logic, which this produces.
var d=function a(){Object.defineProperty(this,'constructor',{value:a}),i.apply(this,arguments),h(this)};'__proto__'in d?d.__proto__=i:(d.from=i.from,d.of=i.of),d.BYTES_PER_ELEMENT=a;var e=function(){};return e.prototype=z,d.prototype=new e,Object.defineProperty(d.prototype,'BYTES_PER_ELEMENT',{value:a}),Object.defineProperty(d.prototype,'_pack',{value:b}),Object.defineProperty(d.prototype,'_unpack',{value:c}),d}a.ArrayBuffer=a.ArrayBuffer||j,Object.defineProperty(i,'from',{value:function(a){return new this(a)}}),Object.defineProperty(i,'of',{value:function()/*...items*/{return new this(arguments)}});// %TypedArray%.prototype
var z={};i.prototype=z,Object.defineProperty(i.prototype,'_getter',{value:function(a){if(1>arguments.length)throw SyntaxError('Not enough arguments');if(a=g(a),!(a>=this.length)){var b,c,d=[];for(b=0,c=this.byteOffset+a*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,c+=1)d.push(this.buffer._bytes[c]);return this._unpack(d)}}}),Object.defineProperty(i.prototype,'get',{value:i.prototype._getter}),Object.defineProperty(i.prototype,'_setter',{value:function(a,b){if(2>arguments.length)throw SyntaxError('Not enough arguments');if(a=g(a),!(a>=this.length)){var c,d,e=this._pack(b);for(c=0,d=this.byteOffset+a*this.BYTES_PER_ELEMENT;c<this.BYTES_PER_ELEMENT;c+=1,d+=1)this.buffer._bytes[d]=e[c]}}}),Object.defineProperty(i.prototype,'constructor',{value:i}),Object.defineProperty(i.prototype,'copyWithin',{value:function(a,b){var c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(a);j=0>k?J(i+k,0):K(k,i);var l,m=f(b);l=0>m?J(i+m,0):K(m,i);var n=void 0===c?i:f(c);var o=0>n?J(i+n,0):K(n,i);var p,q=K(o-l,i-j);for(l<j&&j<l+q?(p=-1,l=l+q-1,j=j+q-1):p=1;0<q;)d._setter(j,d._getter(l)),l+=p,j+=p,--q;return d}}),Object.defineProperty(i.prototype,'every',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;f<c;f++)if(!a.call(e,b._getter(f),f,b))return!1;return!0}}),Object.defineProperty(i.prototype,'fill',{value:function(a){var b=arguments[1],c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(b);j=0>k?J(i+k,0):K(k,i);var l=void 0===c?i:f(c);var m;for(m=0>l?J(i+l,0):K(l,i);j<m;)d._setter(j,a),j+=1;return d}}),Object.defineProperty(i.prototype,'filter',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e,f=[],h=arguments[1],j=0;j<c;j++)e=b._getter(j),a.call(h,e,j,b)&&f.push(e);return new this.constructor(f)}}),Object.defineProperty(i.prototype,'find',{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=1<arguments.length?arguments[1]:void 0,i=0;i<f;){var j=b._getter(i),k=a.call(h,j,i,b);if(!!k)return j;++i}return void 0}}),Object.defineProperty(i.prototype,'findIndex',{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=1<arguments.length?arguments[1]:void 0,i=0;i<f;){var j=b._getter(i),k=a.call(h,j,i,b);if(!!k)return i;++i}return-1}}),Object.defineProperty(i.prototype,'forEach',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;f<c;f++)a.call(e,b._getter(f),f,b)}}),Object.defineProperty(i.prototype,'indexOf',{value:function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=0;if(0<arguments.length&&(d=+arguments[1],d===d?0!==d&&d!==1/0&&d!==-(1/0)&&(d=(0<d||-1)*H(G(d))):d=0),d>=c)return-1;for(var e=0<=d?d:J(c-G(d),0);e<c;e++)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(i.prototype,'join',{value:function(a){if(this===void 0||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;e<c;++e)d[e]=b._getter(e);return d.join(a===void 0?',':a);// Hack for IE7
}}),Object.defineProperty(i.prototype,'lastIndexOf',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=c;1<arguments.length&&(d=+arguments[1],d===d?0!==d&&d!==1/0&&d!==-(1/0)&&(d=(0<d||-1)*H(G(d))):d=0);for(var e=0<=d?K(d,c-1):c-G(d);0<=e;e--)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(i.prototype,'map',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();var e=[];e.length=c;for(var f=arguments[1],h=0;h<c;h++)e[h]=a.call(f,b._getter(h),h,b);return new this.constructor(e)}}),Object.defineProperty(i.prototype,'reduce',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();// no value to return if no initial value and an empty array
if(0===c&&1===arguments.length)throw TypeError();var e,f=0;for(e=2<=arguments.length?arguments[1]:b._getter(f++);f<c;)e=a.call(void 0,e,b._getter(f),f,b),f++;return e}}),Object.defineProperty(i.prototype,'reduceRight',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();// no value to return if no initial value, empty array
if(0===c&&1===arguments.length)throw TypeError();var e,f=c-1;for(e=2<=arguments.length?arguments[1]:b._getter(f--);0<=f;)e=a.call(void 0,e,b._getter(f),f,b),f--;return e}}),Object.defineProperty(i.prototype,'reverse',{value:function(){if(this===void 0||null===this)throw TypeError();for(var a,b=Object(this),c=g(b.length),d=H(c/2),e=0,f=c-1;e<d;++e,--f)a=b._getter(e),b._setter(e,b._getter(f)),b._setter(f,a);return b}}),Object.defineProperty(i.prototype,'set',{value:function(){if(1>arguments.length)throw SyntaxError('Not enough arguments');var a,b,c,e,f,h,i,d,j,k;if('object'===p(arguments[0])&&arguments[0].constructor===this.constructor){if(a=arguments[0],c=g(arguments[1]),c+a.length>this.length)throw RangeError('Offset plus length of array is out of range');if(d=this.byteOffset+c*this.BYTES_PER_ELEMENT,j=a.length*this.BYTES_PER_ELEMENT,a.buffer===this.buffer){for(k=[],f=0,h=a.byteOffset;f<j;f+=1,h+=1)k[f]=a.buffer._bytes[h];for(f=0,i=d;f<j;f+=1,i+=1)this.buffer._bytes[i]=k[f]}else for(f=0,h=a.byteOffset,i=d;f<j;f+=1,h+=1,i+=1)this.buffer._bytes[i]=a.buffer._bytes[h]}else if('object'===p(arguments[0])&&'undefined'!=typeof arguments[0].length){if(b=arguments[0],e=g(b.length),c=g(arguments[1]),c+e>this.length)throw RangeError('Offset plus length of array is out of range');for(f=0;f<e;f+=1)h=b[f],this._setter(c+f,+h)}else throw TypeError('Unexpected argument type(s)')}}),Object.defineProperty(i.prototype,'slice',{value:function(b,d){for(var h=e(this),i=h.length,j=g(i),l=f(b),m=0>l?J(j+l,0):K(l,j),k=void 0===d?j:f(d),o=0>k?J(j+k,0):K(k,j),p=o-m,q=h.constructor,c=new q(p),a=0;m<o;){var n=h._getter(m);c._setter(a,n),++m,++a}return c}}),Object.defineProperty(i.prototype,'some',{value:function(a){if(this===void 0||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;f<c;f++)if(a.call(e,b._getter(f),f,b))return!0;return!1}}),Object.defineProperty(i.prototype,'sort',{value:function(a){if(this===void 0||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;e<c;++e)d[e]=b._getter(e);// Hack for IE8/9
for(a?d.sort(a):d.sort(),e=0;e<c;++e)b._setter(e,d[e]);return b}}),Object.defineProperty(i.prototype,'subarray',{value:function(a,b){function c(a,b,c){return a<b?b:a>c?c:a}a=f(a),b=f(b),1>arguments.length&&(a=0),2>arguments.length&&(b=this.length),0>a&&(a=this.length+a),0>b&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return 0>d&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)}});var E=y(1,k,l),F=y(1,m,n),I=y(1,o,n),L=y(2,q,r),M=y(2,s,t),N=y(4,u,v),O=y(4,w,x),P=y(4,D,C),Q=y(8,B,A);a.Int8Array=a.Int8Array||E,a.Uint8Array=a.Uint8Array||F,a.Uint8ClampedArray=a.Uint8ClampedArray||I,a.Int16Array=a.Int16Array||L,a.Uint16Array=a.Uint16Array||M,a.Int32Array=a.Int32Array||N,a.Uint32Array=a.Uint32Array||O,a.Float32Array=a.Float32Array||P,a.Float64Array=a.Float64Array||Q}(),function(){function b(a,b){return d(a.get)?a.get(b):a[b]}// DataView(buffer, byteOffset=0, byteLength=undefined)
// WebIDL: Constructor(ArrayBuffer buffer,
//                     optional unsigned long byteOffset,
//                     optional unsigned long byteLength)
function e(a,b,d){if(!(a instanceof ArrayBuffer||'ArrayBuffer'===c(a)))throw TypeError();if(b=g(b),b>a.byteLength)throw RangeError('byteOffset out of range');if(d=void 0===d?a.byteLength-b:g(d),b+d>a.byteLength)throw RangeError('byteOffset and length reference an area beyond the end of the buffer');Object.defineProperty(this,'buffer',{value:a}),Object.defineProperty(this,'byteLength',{value:d}),Object.defineProperty(this,'byteOffset',{value:b})}// get DataView.prototype.buffer
// get DataView.prototype.byteLength
// get DataView.prototype.byteOffset
// -- applied directly to instances by the constructor
function f(a){return function(c,d){if(c=g(c),c+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError('Array index out of range');c+=this.byteOffset;for(var e=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),f=[],h=0;h<a.BYTES_PER_ELEMENT;h+=1)f.push(b(e,h));return!!d===!!j&&f.reverse(),b(new a(new Uint8Array(f).buffer),0)}}function h(a){return function(c,d,e){if(c=g(c),c+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError('Array index out of range');// Get bytes
var f,h,i=new a([d]),k=new Uint8Array(i.buffer),l=[];for(f=0;f<a.BYTES_PER_ELEMENT;f+=1)l.push(b(k,f));// Flip if necessary
!!e===!!j&&l.reverse(),h=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),h.set(l)}}var j=function(){var a=new Uint16Array([4660]),c=new Uint8Array(a.buffer);return 18===b(c,0)}();Object.defineProperty(e.prototype,'getUint8',{value:f(Uint8Array)}),Object.defineProperty(e.prototype,'getInt8',{value:f(Int8Array)}),Object.defineProperty(e.prototype,'getUint16',{value:f(Uint16Array)}),Object.defineProperty(e.prototype,'getInt16',{value:f(Int16Array)}),Object.defineProperty(e.prototype,'getUint32',{value:f(Uint32Array)}),Object.defineProperty(e.prototype,'getInt32',{value:f(Int32Array)}),Object.defineProperty(e.prototype,'getFloat32',{value:f(Float32Array)}),Object.defineProperty(e.prototype,'getFloat64',{value:f(Float64Array)}),Object.defineProperty(e.prototype,'setUint8',{value:h(Uint8Array)}),Object.defineProperty(e.prototype,'setInt8',{value:h(Int8Array)}),Object.defineProperty(e.prototype,'setUint16',{value:h(Uint16Array)}),Object.defineProperty(e.prototype,'setInt16',{value:h(Int16Array)}),Object.defineProperty(e.prototype,'setUint32',{value:h(Uint32Array)}),Object.defineProperty(e.prototype,'setInt32',{value:h(Int32Array)}),Object.defineProperty(e.prototype,'setFloat32',{value:h(Float32Array)}),Object.defineProperty(e.prototype,'setFloat64',{value:h(Float64Array)}),a.DataView=a.DataView||e}()})(self),n.includes||(n.includes=function(a){return 0<=this.indexOf(a)});var s={isVglObject3d:!0,mixins:[o],props:['name','position','rotation','scale'],computed:{inst:function(){return new b.Object3D}},created:function(){var a=this.inst;this.position&&a.position.copy(e(this.position)),this.rotation&&a.rotation.copy(f(this.rotation)),this.scale&&a.scale.copy(e(this.scale));var b=i(this);b&&b.inst.add(a)},beforeDestroy:function(){var a=this.inst;a.parent&&a.parent.remove(a)},watch:{position:function(a){this.inst.position.copy(e(a))},rotation:function(a){this.inst.rotation.copy(f(a))},scale:function(a){this.inst.scale.copy(e(a||1))},inst:function(a,b){b.children.length&&a.add.apply(a,r(b.children)),a.position.copy(b.position),a.rotation.copy(b.rotation),a.scale.copy(b.scale);var c=b.parent;c&&(c.remove(b),c.add(a))}}},t={mixins:[s],props:['orbitTarget','orbitPosition'],inject:['cameras'],computed:{inst:function(){return new b.Camera}},created:function(){var a=this.inst,b=this.orbitPosition,c=this.orbitTarget;if(b||c){var d=e(c);b&&a.position.setFromSpherical(g(b)).add(d),a.lookAt(d)}this.$set(this.cameras,this.name,this.inst)},beforeDestroy:function(){this.cameras[this.name]===this.inst&&this.$delete(this.cameras,this.name)},watch:{inst:function(a){this.cameras[this.name]=a},orbitTarget:function(a){var b=this.inst,c=e(a);this.orbitPosition&&b.position.setFromSpherical(g(this.orbitPosition)).add(c),b.lookAt(c)},orbitPosition:function(a){var b=this.inst,c=g(a);b.position.setFromSpherical(c);var d=e(this.orbitTarget);this.orbitTarget&&b.add(d),b.lookAt(d)}}},u={mixins:[s],props:['color','intensity'],computed:{inst:function(){return new b.Light}},created:function(){this.color&&this.inst.color.setStyle(this.color),this.intensity&&(this.inst.intensity=parseFloat(this.intensity))},watch:{color:function(a){this.inst.color.setStyle(a)},intensity:function(a){this.inst.intensity=parseFloat(a)}}},v={mixins:[o],props:['name'],computed:{inst:function(){return new b.Material}},watch:{inst:function(a){var b=l(this);b&&(b[this.name]=a)}},created:function(){var a=l(this);a&&this.$set(a,this.name,this.inst)},beforeDestroy:function(){var a=l(this);a&&a[this.name]===this.inst&&this.$delete(a,this.name)}},w={mixins:[o],props:['name'],computed:{inst:function(){return new b.Geometry}},watch:{inst:function(a){var b=m(this);b&&(b[this.name]=a)}},created:function(){var a=m(this);a&&this.$set(a,this.name,this.inst)},beforeDestroy:function(){var a=m(this);a&&a[this.name]===this.inst&&this.$delete(a,this.name)}},x={props:['material'],computed:{mtl:function(){var a=Object.getPrototypeOf(this.assets.materials);if(a)return a[this.material]}},created:function(){this.mtl&&(this.inst.material=this.mtl)},watch:{mtl:function(a){this.inst.material=a}}},y={props:['geometry'],computed:{geo:function(){var a=Object.getPrototypeOf(this.assets.geometries);if(a)return a[this.geometry]}},created:function(){this.geo&&(this.inst.geometry=this.geo)},watch:{geo:function(a){this.inst.geometry=a}}},z={mixins:[s,y,x],computed:{inst:function(){return new b.Line}}},A={mixins:[z],computed:{inst:function(){return new b.LineSegments}}};a.VglAssets=o,a.VglObject3d=s,a.VglScene={mixins:[s],inject:['scenes'],computed:{inst:function(){return new b.Scene}},created:function(){this.$set(this.scenes,this.name,this.inst)},beforeDestroy:function(){this.scenes[this.name]===this.inst&&this.$delete(this.scenes,this.name)},watch:{inst:function(a){this.scenes[this.name]=a}}},a.VglCamera=t,a.VglRenderer={mixins:[o],props:['precision','alpha','premultipliedAlpha','antialias','stencil','preserveDrawingBuffer','depth','logarithmicDepthBuffer','camera','scene'],provide:function(){return{cameras:this.cameras,scenes:this.scenes}},data:function(){return{cameras:Object.create(null),scenes:Object.create(null),key:0,req:!0}},computed:{opt:function(){return{precision:this.precision,alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha===void 0||this.premultipliedAlpha,antialias:this.antialias,stencil:this.stencil===void 0||this.stencil,preserveDrawingBuffer:this.preserveDrawingBuffer,depth:this.depth===void 0||this.depth,logarithmicDepthBuffer:this.logarithmicDepthBuffer}},inst:function(){return new b.WebGLRenderer(Object.assign({canvas:this.$refs.rdr},this.opt))},cmr:function(){return this.cameras[this.camera]},scn:function(){return this.scenes[this.scene]}},methods:{resize:function(){k(this.inst,this.$el),this.cmr&&(j(this.cmr,this.$el),this.scn&&this.render())},render:function(){var a=this;this.req&&(this.$nextTick(function(){requestAnimationFrame(function(){a.scn&&a.cmr&&a.inst.render(a.scn,a.cmr),a.req=!0})}),this.req=!1)}},watch:{opt:function(){var a=this;++this.key,this.$nextTick(function(){a.resize()})},scn:function(a){a&&this.render()},cmr:function(a){a&&(j(a,this.$el),this.render())}},render:function(a){var b=this;return a('div',[a('canvas',{ref:'rdr',key:this.key},this.$slots.default),a('iframe',{ref:'frm',style:{visibility:'hidden',width:'100%',height:'100%'},on:{load:function(a){a.target.contentWindow.addEventListener('resize',b.resize),b.$nextTick(b.resize)}}})])}},a.VglPerspectiveCamera={mixins:[t],props:['zoom','near','far','fov'],computed:{inst:function(){return new b.PerspectiveCamera}},created:function(){var a=this.inst;this.zoom&&(a.zoom=parseFloat(this.zoom)),this.near&&(a.near=parseFloat(this.near)),this.far&&(a.far=parseFloat(this.far)),this.fov&&(a.fov=parseFloat(this.fov))},watch:{zoom:function(a){this.inst.zoom=parseFloat(a)},near:function(a){this.inst.near=parseFloat(a)},far:function(a){this.inst.far=parseFloat(a)},fov:function(a){this.inst.fov=parseFloat(a)}}},a.VglGroup={mixins:[s],computed:{inst:function(){return new b.Group}}},a.VglLight=u,a.VglDirectionalLight={mixins:[u],computed:{inst:function(){return new b.DirectionalLight}}},a.VglAmbientLight={mixins:[u],computed:{inst:function(){return new b.AmbientLight}}},a.VglMaterial=v,a.VglPointsMaterial={mixins:[v],props:['color','size','sizeAttenuation'],computed:{inst:function(){return new b.PointsMaterial}},created:function(){this.color&&this.inst.color.setStyle(this.color),this.size&&(this.inst.size=parseFloat(this.size)),this.sizeAttenuation!==void 0&&(this.inst.sizeAttenuation=this.sizeAttenuation)},watch:{color:function(a){this.inst.color.setStyle(a)},size:function(a){this.inst.size=parseFloat(a)},sizeAttenuation:function(b){this.inst.sizeAttenuation=b}}},a.VglGeometry=w,a.VglSphereGeometry={mixins:[w],props:['radius','widthSegments','heightSegments','phiStart','phiLength','thetaStart','thetaLength'],computed:{inst:function(){return new b.SphereGeometry(h(this.radius),h(this.widthSegments),h(this.heightSegments),h(this.phiStart),h(this.phiLength),h(this.thetaStart),h(this.thetaLength))}}},a.VglMeshStandardMaterial={mixins:[v],props:['color'],computed:{inst:function(){return new b.MeshStandardMaterial}},created:function(){this.color&&this.inst.color.setStyle(this.color)},watch:{color:function(a){this.inst.color.setStyle(a)}}},a.VglMesh={mixins:[s,y,x],computed:{inst:function(){return new b.Mesh}}},a.VglPoints={mixins:[s,y,x],computed:{inst:function(){return new b.Points}}},a.VglLineBasicMaterial={mixins:[v],props:['color','lights','linewidth','linecap','linejoin'],computed:{inst:function(){return new b.LineBasicMaterial}},created:function(){this.lights&&(this.inst.lights=this.lights),this.linewidth&&(this.inst.linewidth=h(this.linewidth)),this.linecap&&(this.inst.linecap=this.linecap),this.linejoin&&(this.inst.linejoin=this.linejoin),this.color&&this.inst.color.setStyle(this.color)},watch:{color:function(a){this.inst.color.setStyle(a)},lights:function(a){this.inst.lights=a},linewidth:function(a){this.inst.linewidth=h(a)},linecap:function(a){this.inst.linecap=a},linejoin:function(a){this.inst.linejoin=a}}},a.VglLine=z,a.VglSprite={mixins:[s,x],computed:{inst:function(){return new b.Sprite}}},a.VglBoxGeometry={mixins:[w],props:['width','height','depth','widthSegments','heightSegments','depthSegments'],computed:{inst:function(){return new b.BoxGeometry(h(this.width),h(this.height),h(this.depth),h(this.widthSegments),h(this.heightSegments),h(this.depthSegments))}}},a.VglCircleGeometry={mixins:[w],props:['radius','segments','thetaStart','thetaLength'],computed:{inst:function(){return new b.CircleGeometry(h(this.radius),h(this.segments),h(this.thetaStart),h(this.thetaLength))}}},a.VglLineSegments=A,a.VglLineLoop={mixins:[z],computed:{inst:function(){return new b.LineLoop}}},a.VglConeGeometry={mixins:[w],props:['radius','height','radialSegments','heightSegments','openEnded','thetaStart','thetaLength'],computed:{inst:function(){return new b.ConeGeometry(h(this.radius),h(this.height),h(this.radialSegments),h(this.heightSegments),this.openEnded,h(this.thetaStart),h(this.thetaLength))}}},a.VglAxisHelper={mixins:[A],props:['size'],computed:{inst:function(){return new b.AxisHelper(h(this.size))}}},a.VglOrthographicCamera={mixins:[t],props:['zoom','near','far'],computed:{inst:function(){return new b.OrthographicCamera}},created:function(){var a=this.inst;this.zoom&&(a.zoom=parseFloat(this.zoom)),this.near&&(a.near=parseFloat(this.near)),this.far&&(a.far=parseFloat(this.far))},watch:{zoom:function(a){this.inst.zoom=parseFloat(a)},near:function(a){this.inst.near=parseFloat(a)},far:function(a){this.inst.far=parseFloat(a)}}},Object.defineProperty(a,'__esModule',{value:!0})});
