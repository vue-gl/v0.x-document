(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports,require('three')):'function'==typeof define&&define.amd?define(['exports','three'],b):b(a.VueGL={},a.THREE)})(this,function(a,b){'use strict';/**
 * Returns a parsed vector3 object when the argument is a string.
 * Otherwise pass the argument through.
 */function c(a,c){return'string'==typeof a?(c||new b.Vector3).fromArray(a.trim().split(/\s+/).map(function(a){return parseFloat(a)})):c?c.copy(a):a}/**
 * Returns a parsed euler object when the argument is a string.
 * Othewise pass the argument through.
 */function d(a,c){return'string'==typeof a?(c||new b.Euler).fromArray(a.trim().split(/\s+/).map(function(a,b){return 3===b?a:parseFloat(a)})):c?c.copy(a):a}/**
 * Returns a parsed spherical object when the argument is a string.
 * Otherwise pass the argument through.
 */function e(a,c){var d;return'string'==typeof a?(d=c||new b.Spherical).set.apply(d,D(a.trim().split(/\s+/).map(function(a){return parseFloat(a)}))).makeSafe():c?c.copy(a):a}/**
 * Returns a parsed integer number when the argument is a string.
 * Otherwise pass the argument through.
 */function f(a){return'string'==typeof a?parseInt(a,10):a}/**
 * Returns a parsed float number when the argument is a string.
 * Otherwise pass the argument through.
 */function g(a){return'string'==typeof a?parseFloat(a):a}/**
 * Create an object that has array's items as keys. Values are set by setter function.
 */function h(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return a.reduce(function(a,c,d){return Object.assign(a,B({},c,b(c,d))),a},c)}/**
 * Find the nearest ancestor component that has the [key] option.
 */function i(a,b){var c=a.$parent;return c?c.$options[b]?c:i(c,b):void 0}/**
 * Constant arrays useful for props validation.
 *//**
 * Call the ancestor renderer's vglUpdate function from object3d components.
 */function j(a){a.vglUpdate&&a.vglUpdate()}/**
 * Dispatch an update event on the instance of a component.
 */function k(a){a.inst.dispatchEvent({type:'update'})}function l(){return Object.create(null)}function m(a,b){return h(a,function(){return l()},b)}function n(a,b){var c={props:{name:F},inject:[b],created:function(){this.$set(this[b].forSet,this.name,this.inst)},watch:{inst:function(a){this[b].forSet[this.name]=a}},beforeDestroy:function(){this[b].forSet[this.name]===this.inst&&this.$delete(this[b].forSet,this.name)},render:function(a){return this.$slots.default?a('div',this.$slots.default):void 0}};return a&&(c.computed={inst:function(){return new a}}),c}function o(a,b){var c=a+'_';return{props:B({},a,F),inject:[b],computed:B({},c,function(){return this[b].forGet[this[a]]}),mounted:function(){var b=this[c];b&&(this.inst[a]=b,b.addEventListener('update',this.ud))},methods:{ud:function(){j(this)}},watch:B({},c,function(b,c){b!==c&&(this.inst[a]=b,c&&c.removeEventListener('update',this.ud),b&&b.addEventListener('update',this.ud),j(this))})}}function p(a){var b=[o('material','vglMaterials')];return a&&b.push(o('geometry','vglGeometries')),{mixins:b}}function q(a){return{props:{radius:E,detail:E},computed:{inst:function(){return new a(g(this.radius),f(this.detail))}}}}function r(a){return{props:{color:{type:F,default:a}},watch:{color:{handler:function(a){this.inst.color.setStyle(a),k(this)},immediate:!0}}}}function s(a,d,f){if(d||f){var g=c(f);if(d){var h=a.inst.position.setFromSpherical(e(d));g&&h.add(g)}a.inst.lookAt(g||new b.Vector3),j(a)}}function t(a,b){var c=b.clientWidth,d=b.clientHeight;a.isPerspectiveCamera?Object.assign(a,{aspect:c/d}):Object.assign(a,{left:c/-2,right:c/2,top:d/2,bottom:d/-2}),a.updateProjectionMatrix()}function u(a,b){a.setSize(b.clientWidth,b.clientHeight,!1)}function v(a,b){a.inst.setDirection(c(b).normalize())}function w(a){return i(a,'isVglLensFlare')}function x(a){return a.map(function(a){return a.children?x(a.children):a.text}).join('')}var y={};y.typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},y.jsx=function(){var a='function'==typeof Symbol&&Symbol.for&&Symbol.for('react.element')||60103;return function(b,c,d,e){var f=b&&b.defaultProps,g=arguments.length-3;if(c||0==g||(c={}),c&&f)for(var h in f)void 0===c[h]&&(c[h]=f[h]);else c||(c=f||{});if(1==g)c.children=e;else if(1<g){for(var j=Array(g),k=0;k<g;k++)j[k]=arguments[k+3];c.children=j}return{$$typeof:a,type:b,key:void 0===d?null:''+d,ref:null,props:c,_owner:null}}}(),y.asyncIterator=function(a){if('function'==typeof Symbol){if(Symbol.asyncIterator){var b=a[Symbol.asyncIterator];if(null!=b)return b.call(a)}if(Symbol.iterator)return a[Symbol.iterator]()}throw new TypeError('Object is not async iterable')},y.asyncGenerator=function(){function a(a){this.value=a}function b(b){function c(e,f){try{var g=b[e](f),h=g.value;h instanceof a?Promise.resolve(h.value).then(function(a){c('next',a)},function(a){c('throw',a)}):d(g.done?'return':'normal',g.value)}catch(a){d('throw',a)}}function d(a,b){'return'===a?e.resolve({value:b,done:!0}):'throw'===a?e.reject(b):e.resolve({value:b,done:!1});e=e.next,e?c(e.key,e.arg):f=null}var e,f;this._invoke=function(a,b){return new Promise(function(d,g){var h={key:a,arg:b,resolve:d,reject:g,next:null};f?f=f.next=h:(e=f=h,c(a,b))})},'function'!=typeof b.return&&(this.return=void 0)}return'function'==typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this}),b.prototype.next=function(a){return this._invoke('next',a)},b.prototype.throw=function(a){return this._invoke('throw',a)},b.prototype.return=function(a){return this._invoke('return',a)},{wrap:function(a){return function(){return new b(a.apply(this,arguments))}},await:function(b){return new a(b)}}}(),y.asyncGeneratorDelegate=function(a,b){function c(c,d){return e=!0,d=new Promise(function(b){b(a[c](d))}),{done:!1,value:b(d)}}var d={},e=!1;return'function'==typeof Symbol&&Symbol.iterator&&(d[Symbol.iterator]=function(){return this}),d.next=function(a){return e?(e=!1,a):c('next',a)},'function'==typeof a.throw&&(d.throw=function(a){if(e)throw e=!1,a;return c('throw',a)}),'function'==typeof a.return&&(d.return=function(a){return c('return',a)}),d},y.asyncToGenerator=function(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}},y.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')},y.createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y.defineEnumerableProperties=function(a,b){for(var c in b){var d=b[c];d.configurable=d.enumerable=!0,'value'in d&&(d.writable=!0),Object.defineProperty(a,c,d)}return a},y.defaults=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&a[e]===void 0&&Object.defineProperty(a,e,f)}return a},y.defineProperty=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},y.extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},y.get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(e===void 0){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if('value'in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},y.inherits=function(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},y.instanceof=function(a,b){return null!=b&&'undefined'!=typeof Symbol&&b[Symbol.hasInstance]?b[Symbol.hasInstance](a):a instanceof b},y.interopRequireDefault=function(a){return a&&a.__esModule?a:{default:a}},y.interopRequireWildcard=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b},y.newArrowCheck=function(a,b){if(a!==b)throw new TypeError('Cannot instantiate an arrow function')},y.objectDestructuringEmpty=function(a){if(null==a)throw new TypeError('Cannot destructure undefined')},y.objectWithoutProperties=function(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c},y.possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a},y.selfGlobal='undefined'==typeof global?self:global,y.set=function a(b,c,d,e){var f=Object.getOwnPropertyDescriptor(b,c);if(f===void 0){var g=Object.getPrototypeOf(b);null!==g&&a(g,c,d,e)}else if('value'in f&&f.writable)f.value=d;else{var h=f.set;h!==void 0&&h.call(e,d)}return d},y.slicedToArray=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a}finally{try{!e&&h['return']&&h['return']()}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),y.slicedToArrayLoose=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!(b&&d.length===b)););return d}throw new TypeError('Invalid attempt to destructure non-iterable instance')},y.taggedTemplateLiteral=function(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))},y.taggedTemplateLiteralLoose=function(a,b){return a.raw=b,a},y.temporalRef=function(a,b,c){if(a===c)throw new ReferenceError(b+' is not defined - temporal dead zone');else return a},y.temporalUndefined={},y.toArray=function(a){return Array.isArray(a)?a:Array.from(a)},y.toConsumableArray=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},y;var z=function(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')},A=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),B=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},C=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a}finally{try{!e&&h['return']&&h['return']()}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),D=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},E=[String,Number],F=String,G=['vglCameras','vglScenes'],H=['vglGeometries','vglMaterials','vglTextures','vglFonts'],I=[].concat(G,H),J=H.map(function(a){return a+'_'}),K=J.map(function(a){return a+'_'}),L={provide:function(){var a=this,b=function(){function b(a){z(this,b),this.i=a}return A(b,[{key:'forGet',get:function(){return a[K[this.i]]}},{key:'forSet',get:function(){return a[J[this.i]]}}]),b}(),c=function(){function b(a){z(this,b),this.i=a}return A(b,[{key:'forGet',get:function(){return a[G[this.i]]}},{key:'forSet',get:function(){return a[G[this.i]]}}]),b}();return h(H,function(a,c){return new b(c)},a.$data[G[0]]?h(G,function(a,b){return new c(b)}):{})},inject:h(I,function(){return{default:void 0}}),data:function(){var a=this[G[0]]?{}:m(G);return m(J,a)},computed:h(K,function(a,b){return function(){var a=H[b],c=J[b];return this[a]?Object.assign(Object.create(this[a].forGet),this[c]):this[c]}}),render:function(a){return this.$slots.default?a('div',this.$slots.default):void 0}},M=new b.Vector3,N=new b.Euler,O=new b.Vector3(1,1,1),P={isVglObject3d:!0,props:{position:{type:[String,b.Vector3],default:function(){return M}},rotation:{type:[String,b.Euler],default:function(){return N}},scale:{type:[String,b.Vector3],default:function(){return O}},castShadow:Boolean,receiveShadow:Boolean},computed:{inst:function(){return new b.Object3D}},inject:{vglUpdate:{default:void 0}},created:function(){var a=i(this,'isVglObject3d');a&&a.inst.add(this.inst)},beforeDestroy:function(){this.inst.parent&&this.inst.parent.remove(this.inst)},watch:{position:{handler:function(a){c(a||M,this.inst.position),j(this)},immediate:!0},rotation:{handler:function(a){d(a||N,this.inst.rotation),j(this)},immediate:!0},scale:{handler:function(a){c(a||O,this.inst.scale),j(this)},immediate:!0},castShadow:{handler:function(a){this.inst.castShadow=a,j(this)},immediate:!0},receiveShadow:{handler:function(a){this.inst.receiveShadow=a,j(this)},immediate:!0},inst:function(a,b){b.children.length&&a.add.apply(a,D(b.children)),a.position.copy(b.position),a.rotation.copy(b.rotation),a.scale.copy(b.scale),b.parent&&b.parent.remove(b).add(a),j(this)}},render:function(a){return this.$slots.default?a('div',this.$slots.default):void 0}},Q={props:{map:F},inject:['vglTextures'],computed:{tex:function(){return this.vglTextures.forGet[this.map]||null}},watch:{tex:{handler:function(a,b){this.inst.map=a,b||(this.inst.needsUpdate=!0),k(this)},immediate:!0}}},R={mixins:[P,n(b.Scene,'vglScenes')],provide:function(){return this.vglUpdate?void 0:{vglUpdate:function(){this.inst.dispatchEvent({type:'update'})}}}},S={mixins:[P,n(b.Camera,'vglCameras')],props:{orbitTarget:[String,b.Vector3],orbitPosition:[String,b.Spherical]},watch:{orbitTarget:{handler:function(a){s(this,this.orbitPosition,a)},immediate:!0},orbitPosition:function(a){s(this,a,this.orbitTarget)}}},T={mixins:[L],props:{precision:String,alpha:Boolean,disablePremultipliedAlpha:Boolean,antialias:Boolean,disableStencil:Boolean,preserveDrawingBuffer:Boolean,disableDepth:Boolean,logarithmicDepthBuffer:Boolean,camera:String,scene:String,shadowMapEnabled:Boolean},provide:function(){return{vglUpdate:this.render}},data:function(){return{key:0,req:!0}},computed:{opt:function(){return{precision:this.precision,alpha:this.alpha,premultipliedAlpha:!this.disablePremultipliedAlpha,antialias:this.antialias,stencil:!this.disableStencil,preserveDrawingBuffer:this.preserveDrawingBuffer,depth:!this.disableDepth,logarithmicDepthBuffer:this.logarithmicDepthBuffer}},inst:function(){return new b.WebGLRenderer(Object.assign({canvas:this.$refs.rdr},this.opt))},cmr:function(){return(this.$data.vglCameras||this.vglCameras.forGet)[this.camera]},scn:function(){return(this.$data.vglScenes||this.vglScenes.forGet)[this.scene]}},methods:{resize:function(){u(this.inst,this.$el),this.cmr&&(t(this.cmr,this.$el),this.scn&&this.render())},render:function(){var a=this;this.req&&(this.$nextTick(function(){requestAnimationFrame(function(){a.scn&&a.cmr&&a.inst.render(a.scn,a.cmr),a.req=!0})}),this.req=!1)},init:function(){this.resize(),this.inst.shadowMap.enabled=this.shadowMapEnabled}},watch:{opt:function(){this.key+=1,this.$nextTick(this.init)},scn:function(a,b){b&&b.removeEventListener('update',this.render),a&&(a.addEventListener('update',this.render),this.render())},cmr:function(a,b){b&&b.removeEventListener('update',this.render),a&&(a.addEventListener('update',this.render),t(a,this.$el),this.render())},shadowMapEnabled:function(a){this.inst.shadowMap.enabled=a}},created:function(){this.scn&&this.scn.addEventListener('update',this.render),this.cmr&&this.cmr.addEventListener('update',this.render)},mounted:function(){this.init()},render:function(a){var b=this;return a('div',[a('canvas',{ref:'rdr',key:this.key},this.$slots.default),a('iframe',{ref:'frm',style:{visibility:'hidden',width:'100%',height:'100%'},on:{load:function(a){a.target.contentWindow.addEventListener('resize',b.resize,!1)}}})])}},U={mixins:[P],props:{color:{type:String,default:'white'},intensity:{type:[String,Number],default:1}},computed:{inst:function(){return new b.Light}},watch:{color:{handler:function(a){this.inst.color.setStyle(a),j(this)},immediate:!0},intensity:{handler:function(a){this.inst.intensity=g(a),j(this)},immediate:!0}}},V={mixins:[U],computed:{inst:function(){return new b.DirectionalLight}},props:{castShadow:Boolean},watch:{castShadow:{handler:function(a){this.inst.castShadow=a,j(this)},immediate:!0}}},W={mixins:[n(b.Material,'vglMaterials')]},X={mixins:[W],props:{color:{type:String,default:'#fff'},size:{type:[String,Number],default:1},disableSizeAttenuation:Boolean},computed:{inst:function(){return new b.PointsMaterial}},created:function(){var a=this.inst;a.color.setStyle(this.color),a.size=g(this.size),a.sizeAttenuation=!this.disableSizeAttenuation},watch:{color:function(a){this.inst.color.setStyle(a)},size:function(a){this.inst.size=g(a)},disableSizeAttenuation:function(a){this.inst.sizeAttenuation=!a}}},Y={mixins:[n(b.Geometry,'vglGeometries')]},Z=[String,Number],$=['radius','widthSegments','heightSegments','phiStart','phiLength','thetaStart','thetaLength'],_={mixins:[Y],props:h($,function(){return Z}),computed:{inst:function(){var a=this,c=$.map(function(b,c){return(1>c||2<c?g:f)(a[b])});return new(Function.prototype.bind.apply(b.SphereGeometry,[null].concat(D(c))))}}},aa={mixins:[W,r('#fff'),Q],computed:{inst:function(){return new b.MeshStandardMaterial}}},ba={mixins:[P,p(!0)],computed:{inst:function(){return new b.Mesh}}},ca={mixins:[P,p(!0)],computed:{inst:function(){return new b.Points}}},da={mixins:[W],props:{color:{type:String,default:'#fff'},lights:Boolean,linewidth:{type:[String,Number],default:1},linecap:{type:String,default:'round'},linejoin:{type:String,default:'round'}},computed:{inst:function(){return new b.LineBasicMaterial}},created:function(){var a=this.inst;a.lights=this.lights,a.linecap=this.linecap,a.linejoin=this.linejoin,a.linewidth=g(this.linewidth),a.color.setStyle(this.color)},watch:{color:function(a){this.inst.color.setStyle(a)},lights:function(a){this.inst.lights=a},linewidth:function(a){this.inst.linewidth=g(a)},linecap:function(a){this.inst.linecap=a},linejoin:function(a){this.inst.linejoin=a}}},ea={mixins:[P,p(!0)],computed:{inst:function(){return new b.Line}}},fa={mixins:[P,p()],computed:{inst:function(){return new b.Sprite}}},ga=[String,Number],ha=['width','height','depth'],ia=['widthSegments','heightSegments','depthSegments'],ja={mixins:[Y],props:h(ha,function(){return ga},h(ia,function(){return ga})),computed:{inst:function(){var a=this;return new(Function.prototype.bind.apply(b.BoxGeometry,[null].concat(D(ha.map(function(b){return g(a[b])})),D(ia.map(function(b){return f(a[b])})))))}}},ka=[String,Number],la=['radius','segments','thetaStart','thetaLength'],ma={mixins:[Y],props:h(la,function(){return ka}),computed:{inst:function(){var a=this,c=la.map(function(b,c){return(1===c?f:g)(a[b])});return new(Function.prototype.bind.apply(b.CircleGeometry,[null].concat(D(c))))}}},na={mixins:[ea],computed:{inst:function(){return new b.LineSegments}}},oa=[String,Number],pa=['radiusTop','radiusBottom','height','radialSegments','heightSegments','openEnded','thetaStart','thetaLength'],qa={mixins:[Y],props:h(pa,function(a,b){return 5===b?Boolean:oa}),computed:{inst:function(){var a=this,c=pa.map(function(b,c){return(3>c||5<c?g:f)(a[b])});return new(Function.prototype.bind.apply(b.CylinderGeometry,[null].concat(D(c))))}}},ra={mixins:[qa],props:{radius:[String,Number]},computed:{inst:function(){var a=this;return new(Function.prototype.bind.apply(b.ConeGeometry,[null].concat(D(['radius','height','radialSegments','heightSegments','openEnded','thetaStart','thetaLength'].map(function(b,c){return(2>c||4<c?g:f)(a[b])})))))}}},sa={mixins:[na],props:{size:[String,Number]},computed:{inst:function(){return new b.AxesHelper(g(this.size))}}},ta=[String,Number],ua=['width','height','widthSegments','heightSegments'],va={mixins:[Y],props:h(ua,function(){return ta}),computed:{inst:function(){var a=this,c=ua.map(function(b,c){return(1<c?f:g)(a[b])});return new(Function.prototype.bind.apply(b.PlaneGeometry,[null].concat(D(c))))}}},wa={mixins:[Y,q(b.DodecahedronGeometry)]},xa={mixins:[Y,q(b.IcosahedronGeometry)]},ya={mixins:[Y,q(b.OctahedronGeometry)]},za=[String,Number],Aa=['innerRadius','outerRadius','thetaSegments','phiSegments','thetaStart','thetaLength'],Ba={mixins:[Y],props:h(Aa,function(){return za}),computed:{inst:function(){var a=this,c=Aa.map(function(b,c){return(2>c||3<c?g:f)(a[b])});return new(Function.prototype.bind.apply(b.RingGeometry,[null].concat(D(c))))}}},Ca={mixins:[Y,q(b.TetrahedronGeometry)]},Da=[String,Number],Ea=['radius','tube','radialSegments','tubularSegments','arc'],Fa={mixins:[Y],props:h(Ea,function(){return Da}),computed:{inst:function(){var a=this,c=Ea.map(function(b,c){return(2>c||3<c?g:f)(a[b])});return new(Function.prototype.bind.apply(b.TorusGeometry,[null].concat(D(c))))}}},Ga=[String,Number],Ha=['radius','tube','tubularSegments','radialSegments','p','q'],Ia={mixins:[Y],props:h(Ha,function(){return Ga}),computed:{inst:function(){var a=this,c=Ha.map(function(b,c){return(2>c||3<c?g:f)(a[b])});return new(Function.prototype.bind.apply(b.TorusKnotGeometry,[null].concat(D(c))))}}},Ja=[String,Number],Ka=new b.Vector3(0,1),La=new b.Vector3,Ma=new b.Color,Na={mixins:[P],props:{dir:{type:[String,b.Vector3],default:function(){return Ka}},length:{type:Ja,default:1},color:{type:String,default:'#ff0'},headLength:Ja,headWidth:Ja},computed:{inst:function(){return new b.ArrowHelper(Ka,La)},len:function(){return[g(this.length),g(this.headLength),g(this.headWidth)]}},created:function(){var a;this.dir!==Ka&&this.inst.setDirection(c(this.dir).normalize()),(a=this.inst).setLength.apply(a,D(this.len)),this.inst.setColor(Ma.setStyle(this.color))},watch:{dir:function(a){v(this,a)},len:function(a){var b;(b=this.inst).setLength.apply(b,D(a))},color:function(a){this.inst.setColor(Ma.setStyle(a))}}},Oa={mixins:[U],props:{distance:{type:E,default:0},decay:{type:E,default:1},angle:{type:E,default:Math.PI/3},penumbra:{type:E,default:0},target:{type:[String,b.Vector3]}},computed:{inst:function(){return new b.SpotLight}},created:function(){var a=this;if(this.target){c(this.target,this.inst.target.position);var b=i(this,'isVglObject3d');b&&this.$watch(function(){return b.inst},function(b,c){c&&c.remove(a.inst.target),b.add(a.inst.target),j(a)},{immediate:!0})}},beforeDestroy:function(){this.inst.target.parent&&this.inst.target.parent.remove(this.inst.target)},watch:{distance:{handler:function(a){this.inst.distance=g(a),j(this)},immediate:!0},decay:{handler:function(a){this.inst.decay=g(a),j(this)},immediate:!0},angle:{handler:function(a){this.inst.angle=g(a),j(this)},immediate:!0},penumbra:{handler:function(a){this.inst.penumbra=g(a),j(this)},immediate:!0},target:function(a){c(a,this.inst.target.position),j(this)}}},Pa={mixins:[n(null,'vglTextures')],props:{src:F},data:function(){return{inst:null}},watch:{src:{handler:function(a){var c=this;new b.TextureLoader().load(a,function(a){c.inst=a})},immediate:!0}}},Qa={inject:['vglTextures'],props:{texture:{type:F},size:{type:E,default:-1},distance:{type:E,default:0},blending:{type:E,default:b.NormalBlending},color:{type:F,default:'#fff'}},data:function(){return{inst:null}},computed:{opts:function(){return[this.vglTextures.forGet[this.texture],f(this.size),g(this.distance),f(this.blending),new b.Color(this.color)]}},beforeDestroy:function(){var a=w(this);this.remove(a),j(a)},watch:{opts:{handler:function(a){var b=w(this);b&&(this.inst?(a[0]?this.replace(b):(this.remove(b),this.inst=null),j(b)):a[0]&&(this.add(b),j(b)))},immediate:!0}},methods:{add:function(a){var b;(b=a.inst).add.apply(b,D(this.opts));var c=a.inst.lensFlares.slice(-1),d=C(c,1);this.inst=d[0]},remove:function(a){a.inst.lensFlares.splice(a.inst.lensFlares.indexOf(this.inst),1)},replace:function(a){this.remove(a),this.add(a)}},render:function(a){return this.$slots.default?a('div',this.$slots.default):void 0}},Ra={mixins:[n(null,'vglFonts')],props:{src:F},data:function(){return{inst:null}},watch:{src:{handler:function(a){var c=this;if(!/^data:.*?(?:;base64)?,.*$/.test(a)){// GET src data manually and pass as a data URI.
var d=new XMLHttpRequest;d.addEventListener('load',function(){new b.FontLoader().load('data:,'+encodeURIComponent(d.responseText),function(a){c.inst=a})},!1),d.open('GET',a),d.send()}else new b.FontLoader().load(a,function(a){c.inst=a})},immediate:!0}}},Sa={mixins:[Y],computed:{inst:function(){return new b.ExtrudeGeometry([],{})}}},Ta={mixins:[Sa],inject:['vglFonts'],props:{font:F,size:{type:E,default:100},height:{type:E,default:50},curveSegments:{type:E,default:12},bevelEnabled:Boolean,bevelThickness:{type:E,default:10},bevelSize:{type:E,default:8},bevelSegments:{type:E,default:3}},computed:{inst:function(){var a=this.vglFonts.forGet[this.font],c=this.$slots.default;return a&&c?new b.TextGeometry(x(c),{font:a,size:g(this.size),height:g(this.height),curveSegments:f(this.curveSegments),bevelEnabled:this.bevelEnabled,bevelThickness:g(this.bevelThickness),bevelSize:g(this.bevelSize),bevelSegments:f(this.bevelSegments)}):void 0}}},Ua={mixins:[W,r('#fff'),Q],inject:['vglTextures'],computed:{inst:function(){return new b.SpriteMaterial}}};a.VglNamespace=L,a.VglObject3d=P,a.VglScene=R,a.VglCamera=S,a.VglRenderer=T,a.VglPerspectiveCamera={mixins:[S],props:{zoom:{type:E,default:1},near:{type:E,default:0.1},far:{type:E,default:2e3},fov:{type:E,default:50}},computed:{inst:function(){return new b.PerspectiveCamera}},watch:{zoom:{handler:function(a){this.inst.zoom=g(a),j(this)},immediate:!0},near:{handler:function(a){this.inst.near=g(a),j(this)},immediate:!0},far:{handler:function(a){this.inst.far=g(a),j(this)},immediate:!0},fov:{handler:function(a){this.inst.fov=g(a),j(this)},immediate:!0}}},a.VglGroup={mixins:[P],computed:{inst:function(){return new b.Group}}},a.VglLight=U,a.VglDirectionalLight=V,a.VglAmbientLight={mixins:[U],computed:{inst:function(){return new b.AmbientLight}}},a.VglMaterial=W,a.VglPointsMaterial=X,a.VglGeometry=Y,a.VglSphereGeometry=_,a.VglMeshStandardMaterial=aa,a.VglMesh=ba,a.VglPoints=ca,a.VglLineBasicMaterial=da,a.VglLine=ea,a.VglSprite=fa,a.VglBoxGeometry=ja,a.VglCircleGeometry=ma,a.VglLineSegments=na,a.VglLineLoop={mixins:[ea],computed:{inst:function(){return new b.LineLoop}}},a.VglConeGeometry=ra,a.VglAxesHelper=sa,a.VglOrthographicCamera={mixins:[S],props:{zoom:{type:E,default:1},near:{type:E,default:0.1},far:{type:E,default:2e3}},computed:{inst:function(){return new b.OrthographicCamera}},watch:{zoom:{handler:function(a){this.inst.zoom=g(a),j(this)},immediate:!0},near:{handler:function(a){this.inst.near=g(a),j(this)},immediate:!0},far:{handler:function(a){this.inst.far=g(a),j(this)},immediate:!0}}},a.VglCylinderGeometry=qa,a.VglPlaneGeometry=va,a.VglDodecahedronGeometry=wa,a.VglIcosahedronGeometry=xa,a.VglOctahedronGeometry=ya,a.VglRingGeometry=Ba,a.VglTetrahedronGeometry=Ca,a.VglTorusGeometry=Fa,a.VglTorusKnotGeometry=Ia,a.VglArrowHelper=Na,a.VglBoxHelper={mixins:[na],props:{color:{type:F,default:'#ff0'}},computed:{inst:function(){return new b.BoxHelper}},data:function(){return{uw:null,r:!0}},created:function(){var a=this,b=this.inst;b.parent&&(this.uw=this.$watch(function(){return b.parent},function(){a.r&&(a.$nextTick(function(){b.setFromObject(b.parent),a.r=!0}),a.r=!1)},{immediate:!0}))},beforeDestroy:function(){this.uw&&this.uw()},watch:{color:{handler:function(a){this.inst.material.color.setStyle(a)},immediate:!0}}},a.VglPointLight={mixins:[U],props:{distance:{type:E,default:0},decay:{type:E,default:1}},computed:{inst:function(){return new b.PointLight}},watch:{distance:{handler:function(a){this.inst.distance=g(a),j(this)},immediate:!0},decay:{handler:function(a){this.inst.decay=g(a),j(this)},immediate:!0}}},a.VglSpotLight=Oa,a.VglTexture=Pa,a.VglLensFlare={isVglLensFlare:!0,mixins:[P],computed:{inst:function(){return new b.LensFlare}}},a.VglLensFlareTexture=Qa,a.VglFont=Ra,a.VglExtrudeGeometry=Sa,a.VglTextGeometry=Ta,a.VglSpriteMaterial=Ua,a.VglGridHelper={mixins:[na],props:{size:{type:E,default:10},divisions:{type:E,default:10},colorCenterLine:{type:F,default:'#444444'},colorGrid:{type:F,default:'#888888'}},computed:{inst:function(){var a=this;return new b.GridHelper(g(a.size),f(a.divisions),a.colorCenterLine,a.colorGrid)}}},a.VglShadowMaterial={mixins:[W],computed:{inst:function(){return new b.ShadowMaterial}}},a.VglCameraHelper={mixins:[na],props:{camera:F},inject:['vglCameras'],computed:{inst:function(){var a=this.vglCameras.forGet[this.camera];return a?new b.CameraHelper(a):new b.LineSegments}}},a.VglDirectionalLightHelper={mixins:[P],props:{color:{type:F},size:{type:E,default:1}},computed:{inst:function(){return this.i},hex:function(){return'color'in this.i&&this.i.parent&&this.i.parent.color.getHex()}},created:function(){var a=i(this,'isVglObject3d');a&&(this.i=new b.DirectionalLightHelper(a.inst,g(this.size),this.color))},data:function(){return{i:new b.Object3D}},watch:{color:function(a){'color'in this.i&&(this.inst.color=a,this.inst.update())},hex:function(a){a&&!this.color&&this.inst.update()},size:function(a){this.i.parent&&(this.i=new b.DirectionalLightHelper(this.i.parent,g(a),this.color))}}},Object.defineProperty(a,'__esModule',{value:!0})});
